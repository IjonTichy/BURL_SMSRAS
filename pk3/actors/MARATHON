//TwelveEyes gave me permission to use his Marathon resources. Massive massive credit to him!
//Also major thanks to Hopper and PresidentPeople--you guys are awesome!

ACTOR MarathonPlayer : PlayerPawn
{
	Player.DisplayName "SecurityOfficer"
	Gravity 0.15
	Mass 220
    scale 0.45
	BloodColor "Red"
  Player.Face "MAR"
    Player.JumpZ 4//Default is 8
	Player.ForwardMove 0.95, 0.925
	Player.SideMove 0.95, 0.925
	Player.DamageScreenColor "Red"//, 0.0
	Player.Soundclass "MarathonPlayer"
	+NOSKIN
   -DONTBLAST
	-THRUSPECIES
	//+NOICEDEATH
	Species "Player"
	Player.ColorRange 112, 123
	Player.StartItem "OverMax", 200
	Player.StartItem "OverOverMax", 300
	Player.StartItem ".44 Magnum Mega Class A1", 1
	Player.StartItem "Steel Knuckles", 1
	Player.StartItem "Clip", 50
	Player.StartItem "RocketAmmo", 10
	Player.StartItem "AmmoShell", 20
	Player.StartItem "Cell", 50
	Player.StartItem "MarathonClass", 1
	//Player.StartItem "Allmap", 1
	//Player.StartItem "PowerScanner", 1
	Player.StartItem "MagnumBullet", 100
	Player.StartItem "MagnumBulletRight", 100
	Player.StartItem "RifleBullet", 500
	Player.StartItem "SmgBullet", 500
	Player.StartItem "FusionBullet", 500
	Player.StartItem "GrenadeInClip", 500
	Player.StartItem "WMCAmmo", 500
	Player.StartItem "MortarAmmo", 500
	Player.StartItem "NapalmInTank", 500
	Player.StartItem "SpankerAmmo", 2
	DamageFactor "WMCBeam", 0.75
	DamageFactor "WMCNade", 0.75
	
	States
	{
	
  Spawn:
    SOPL AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_JumpIf(momz >> 0, "Jumping")
    Loop
  See:
    SOPL BBBBCCCCDDDDEEEE 1 A_JumpIf(momz >> 0, "Jumping")
    Loop
  Jumping:
    SOPL C 3
	SOPL C 1 A_JumpIf(momz >> 0, "Jumping")
    goto Spawn
  Missile:
    SOPL F 12 
    Goto Spawn
  Melee:
    SOPL G 6 BRIGHT
    Goto Missile

  Death.HexGreenFire:
  //Death.MarathonPlasma:
  Burn:
	TNT1 A 0 A_JumpIfInventory("FusionChargeLevel",1,"BurnFusionShot")
  BurnFusionContinue:
	TNT1 A 0 A_TakeInventory("FusionChargan",7)
	TNT1 A 0 A_TakeInventory("FusionChargeLevel",35)
	TNT1 A 0 A_TakeInventory("ChargeLevel2",99)
	TNT1 A 0 A_TakeInventory("ChargeLevel",99)
	TNT1 A 0 A_TakeInventory("WMCCharge",99)
	TNT1 A 0 ThrustThingZ(0, random(4,20), 0, 0)
	TNT1 A 0 A_Recoil(random(1,3))
    TNT1 A 0 A_PlaySound("*burndeath")
	TNT1 A 0 A_UnsetSolid
	SOPL U 5 Bright
  Burn2:
	SOPL U 5 Bright A_CheckFloor("Burn3")
	loop
  Burn3:
	SOPL V 6 Bright
	SOPL W 6 Bright
	SOPL X 6 Bright
	SOPL Y 6
	SOPL Y -1
	stop
  BurnFusionShot:
	TNT1 A 0 A_CustomMissile("FusionSuper",25,0,random(-15,15),2,random(-10,10))
	goto BurnFusionContinue
  Death:
	TNT1 A 0 A_JumpIfInventory("FusionChargeLevel",1,"DeathFusionShot")
  DeathFusionContinue:
	TNT1 A 0 A_TakeInventory("FusionChargan",7)
	TNT1 A 0 A_TakeInventory("FusionChargeLevel",35)
	TNT1 A 0 A_TakeInventory("ChargeLevel2",99)
	TNT1 A 0 A_TakeInventory("ChargeLevel",99)
	TNT1 A 0 A_TakeInventory("WMCCharge",99)
    SOPL N 6
    SOPL O 6 A_PlayerScream
    SOPL P 6 A_NoBlocking
    SOPL Q 6
	SOPL S 6
    SOPL T -1
    Stop
  DeathFusionShot:
	TNT1 A 0 A_CustomMissile("FusionSuper",25,0,random(-15,15),2,random(-10,10))
	goto DeathFusionContinue
  Death.MarathonFusion:
  XDeath:
	TNT1 A 0 A_JumpIfInventory("FusionChargeLevel",1,"XDeathFusionShot")
  XDeathFusionContinue:
	TNT1 A 0 A_TakeInventory("FusionChargan",7)
	TNT1 A 0 A_TakeInventory("FusionChargeLevel",35)
	TNT1 A 0 A_TakeInventory("ChargeLevel2",99)
	TNT1 A 0 A_TakeInventory("ChargeLevel",99)
	TNT1 A 0 A_TakeInventory("WMCCharge",99)
	//TNT1 A 0 ThrustThing(angle*256/360+(random(0,360)), random(2,8), 0, 0)
	TNT1 A 0 ThrustThingZ(0, random(8,24), 0, 0)
	TNT1 A 0 A_Recoil(random(1,3))
	TNT1 A 0 A_UnsetSolid
	TNT1 A 0 A_XScream
	SOPL H 5
  XDeath2:
    SOPL H 5 A_CheckFloor("XDeath3")
	loop
  XDeath3:
    SOPL I 4 A_PlaySound("*splat")
    SOPL J 4 A_NoBlocking
	SOPL KL 4
    SOPL M -1
    Stop
  DukeXDeath:
	TNT1 A 0 A_JumpIfInventory("FusionChargeLevel",1,"DukeXDeathFusionShot")
  DukeXDeathFusionContinue:
	TNT1 A 0 A_TakeInventory("FusionChargan",7)
	TNT1 A 0 A_TakeInventory("FusionChargeLevel",35)
	TNT1 A 0 A_TakeInventory("ChargeLevel2",99)
	TNT1 A 0 A_TakeInventory("ChargeLevel",99)
	TNT1 A 0 A_TakeInventory("WMCCharge",99)
	//TNT1 A 0 ThrustThing(angle*256/360+(random(0,360)), random(2,8), 0, 0)
	TNT1 A 0 ThrustThingZ(0, random(8,24), 0, 0)
	TNT1 A 0 A_Recoil(random(1,3))
	TNT1 A 0 A_UnsetSolid
	TNT1 A 0 A_XScream
	SOPL H 5
  DukeXDeath2:
    SOPL H 5 A_CheckFloor("DukeXDeath3")
	loop
  DukeXDeath3:
    TNT1 A 0 A_SpawnDebris("DukeGibs1")
    TNT1 A 0 A_SpawnDebris("DukeGibs2")
    TNT1 A 0 A_SpawnDebris("DukeGibs3")
    TNT1 A 0 A_SpawnDebris("DukeGibs4")
    TNT1 A 0 A_SpawnDebris("DukeGibs5")
    TNT1 A 0 A_SpawnDebris("DukeGibs6")
    SOPL I 4 A_PlaySound("duke/enemygib")
    SOPL J 4 A_NoBlocking
	SOPL KL 4
    SOPL M -1
    Stop
  XDeathFusionShot:
	TNT1 A 0 A_CustomMissile("FusionSuper",25,0,random(-15,15),2,random(-10,10))
	goto XDeathFusionContinue
  DukeXDeathFusionShot:
	TNT1 A 0 A_CustomMissile("FusionSuper",25,0,random(-15,15),2,random(-10,10))
	goto DukeXDeathFusionContinue
  Death.PoisonCloud:
  Death.Poison:
	TNT1 A 0 A_JumpIfInventory("FusionChargeLevel",1,"DrownFusionShot")
  Death.Drowning:
  DrownFusionContinue:
	TNT1 A 0 A_TakeInventory("FusionChargan",7)
	TNT1 A 0 A_TakeInventory("FusionChargeLevel",35)
	TNT1 A 0 A_TakeInventory("ChargeLevel2",99)
	TNT1 A 0 A_TakeInventory("ChargeLevel",99)
	TNT1 A 0 A_TakeInventory("WMCCharge",99)
    SOPL N 6
    SOPL O 6 A_PlaySound("marathon/drown")
    SOPL P 6 A_NoBlocking
    SOPL Q 6
	SOPL S 6
    SOPL T -1
	stop
  DrownFusionShot:
	TNT1 A 0 A_CustomMissile("FusionSuper",25,0,random(-15,15),2,random(-10,10))
	goto DrownFusionContinue
  Death.ZorchPistol:
  Death.Zorch:
	TNT1 A 0 A_JumpIfInventory("FusionChargeLevel",1,"ZorchFusionShot")
  ZorchFusionContinue:
	TNT1 A 0 A_TakeInventory("FusionChargan",7)
	TNT1 A 0 A_TakeInventory("FusionChargeLevel",35)
	TNT1 A 0 A_TakeInventory("ChargeLevel2",99)
	TNT1 A 0 A_TakeInventory("ChargeLevel",99)
	TNT1 A 0 A_TakeInventory("WMCCharge",99)
	SOPL Z 0 A_Stop
	TNT1 A 0 A_PlaySoundEx("chex/zorch","soundslot5",0,0)
	SOPL Z 3 A_SpawnItem("ZorchEffectSmall")
    SOPL Z 3 A_SetTranslucent(0.9,0)
	SOPL Z 0 A_PlayerScream
    SOPL Z 3 A_SetTranslucent(0.8,0)
    SOPL Z 0 A_NoBlocking
    SOPL Z 3 A_SetTranslucent(0.7,0)
    SOPL Z 3 A_SetTranslucent(0.6,0)
    SOPL Z 3 A_SetTranslucent(0.5,0)
    SOPL Z 3 A_SetTranslucent(0.4,0)
    SOPL Z 3 A_SetTranslucent(0.3,0)
    SOPL Z 3 A_SetTranslucent(0.2,0)
    SOPL Z 3 A_SetTranslucent(0.1,0)
	ACLO E 1 A_SetTranslucent(1,0)
    ACLO E -1
    stop
  ZorchFusionShot:
	TNT1 A 0 A_CustomMissile("FusionSuper",25,0,random(-15,15),2,random(-10,10))
	goto ZorchFusionContinue
  CoOpModeOn:
    TNT1 A 0
    TNT1 A 0 A_ChangeFlag("THRUSPECIES",1)
    TNT1 A 0 A_ChangeFlag("DONTBLAST",1)
    SOPL A 1
	goto See
  Death.DukeDamage:
  Death.DukePistol:
    TNT1 A 0 A_Jump(218,"Death")
	TNT1 A 0 A_GiveToTarget("DukeDMTaunt1",1)
	goto Death
  Death.DukeExplosive:
	TNT1 A 0 A_JumpIfHealthLower(-5,"DukeGibStart")
	goto Death.DukeDamage
  DukeGibStart:
	TNT1 A 0 A_UnsetSolid
    TNT1 A 0 A_Jump(96,"DukeXDeath")
	TNT1 A 0 A_GiveToTarget("DukeDMTaunt1",1)
	goto DukeXDeath
  Death.DukeIce:
    TNT1 A 0 A_Jump(218,"Ice")
    TNT1 A 0 A_GiveToTarget("DukeDMTaunt1",1)
	goto Ice
  Ice:
  Death.HexenIce:
  Death.Ice:
	TNT1 A 0 A_JumpIfInventory("FusionChargeLevel",1,"IceFusionShot")
  IceFusionContinue:
	TNT1 A 0 A_TakeInventory("FusionChargan",7)
	TNT1 A 0 A_TakeInventory("FusionChargeLevel",35)
	TNT1 A 0 A_TakeInventory("ChargeLevel2",99)
	TNT1 A 0 A_TakeInventory("ChargeLevel",99)
	TNT1 A 0 A_TakeInventory("WMCCharge",99)
    SOFR Z 5 A_GenericFreezeDeath // I'm...really not sure why this isn't automatically applying the palette.
    SOFR Z 1 A_FreezeDeathChunks // So I had to make new sprites for him. Oh well!
    Wait
  IceFusionShot:
	TNT1 A 0 A_CustomMissile("FusionSuper",25,0,random(-15,15),2,random(-10,10))
	goto IceFusionContinue
	
  Pain.DoomCacodemon:
  Pain.HexSlaughtaur:
    SOPL Z 4 A_SetBlend("0EBFE9",0.8,8) // Diamond blue
    SOPL Z 4 A_Pain
    Goto Spawn
	
  Pain.HereWizard:
  Pain.HexHeresiarchPurple:
    SOPL Z 4 A_SetBlend("5C246E",0.8,8) // Ultramarine violet
    SOPL Z 4 A_Pain
    Goto Spawn

  Pain.HexBishop:
  Pain.DoomSpiderPlasma:
    SOPL Z 4 A_SetBlend("00FF66",0.8,8) // Neon avacado
    SOPL Z 4 A_Pain
    Goto Spawn

  Pain.HexGreenFire:
  Pain.HexStalkerShot:
  Pain.DoomHellNoble:
  Pain.CorvusCrossbow:
  Pain.HereAxeGreen:
    SOPL Z 4 A_SetBlend("49E20E",0.8,8) // Nerf green
    SOPL Z 4 A_Pain
    Goto Spawn
	
  Pain.HereNitrogolem:
    SOPL Z 4 A_SetBlend("E6B426",0.8,8) // Yellow chocolate
    SOPL Z 4 A_Pain
    Goto Spawn
	
  Pain.BJSpear:
    SOPL Z 4 A_SetBlend("FFEC8B",0.8,8) // Light goldenrod
    SOPL Z 4 A_Pain
    Goto Spawn
	
  Pain.HereLichWind:
    SOPL Z 4 A_SetBlend("CDC9A5",0.8,8) // Lemon chiffon
    SOPL Z 4 A_Pain
    Goto Spawn
  
  Pain.HereDsparil:
  Pain.MarathonFusion:
  Pain.DoomPlasma:
    SOPL Z 4 A_SetBlend("0FDDAF",0.8,8) // Turquoise
    SOPL Z 4 A_Pain
    Goto Spawn
	
  Pain.DoomTheseGuysAreTheBest:
  Pain.Explosive:
  Pain.DukeExplosive:
    SOPL Z 4 A_SetBlend("Yellow",0.8,8)
    SOPL Z 4 A_Pain
    Goto Spawn
	
  Pain.CorvusHellstaff:
  Pain.HereAxeRed:
    SOPL Z 4 A_SetBlend("8B0000",0.8,8) // Dark red
    SOPL Z 4 A_Pain
    Goto Spawn
	
  Pain.MightyBoot:
  Pain.Mace:
  Pain.DukeDamage:
  Pain.DukePistol:
  Pain.Pistol:
  Pain:
    SOPL Z 4 A_SetBlend("E3170D",0.8,8) // Cadmium red
    SOPL Z 4 A_Pain
    Goto Spawn
	
  Pain.TimonsAxe:
  Pain.DragonClaw:
    SOPL Z 4 A_SetBlend("Blue",0.8,8)
    SOPL Z 4 A_Pain
    Goto Spawn
	
  Pain.BFG:
  Pain.BFGspray:
  Pain.BFGsplash:
    SOPL Z 4 A_SetBlend("7FFF00",0.8,8) // Chartreuse
    SOPL Z 4 A_Pain
    Goto Spawn
	
  Pain.ZorchPistol:
  Pain.Zorch:
    SOPL Z 4 A_SetBlend("Red",0.8,8)
    SOPL Z 4 A_Pain
    Goto Spawn
	
  Pain.WolfenFlamethrower:
  Pain.MarathonPlasma:
  Pain.Fire:
    SOPL Z 4 A_SetBlend("FF8C00",0.8,8) // Fiery orange
    SOPL Z 4 A_Pain
    Goto Spawn
	
  Pain.Drowning:
    SOPL Z 4 A_SetBlend("White",0.8,8)
    SOPL Z 4 A_Pain
    Goto Spawn
	
  Pain.HexenIce:
  Pain.DukeIce:
  Pain.Ice:
    SOPL Z 4 A_SetBlend("00FFFF",0.8,8) // Aqua
    SOPL Z 4 A_Pain
    Goto Spawn
	
  Pain.Poison:
  Pain.PoisonCloud:
  Pain.Flem:
  Pain.Slime:
    SOPL Z 4 A_SetBlend("228B22",0.8,8) // Muck green
    SOPL Z 4 A_Pain
    Goto Spawn
	}
}

ACTOR GenericItem : Inventory
{
   - INVBAR
   + UNDROPPABLE
   Inventory.MaxAmount 1
   Inventory.Icon TNT1A0
}

ACTOR SynthFireActive : GenericItem {} // enables synthetic-fire system.
ACTOR SynthFireLeft   : GenericItem {} // special refire-trackers for
ACTOR SynthFireRight  : GenericItem {} // synthetic-fire dual-wielding.

ACTOR DOUBLEFISTING : GenericItem {}
ACTOR CanDualShotties : GenericItem {}
ACTOR CanDualPistols : GenericItem {}
ACTOR LevelLimiter : GenericItem {}

ACTOR LeftReload : GenericItem {}
ACTOR RightReload : GenericItem {}

actor MarathonClass : Inventory { -INVBAR +INVENTORY.UNDROPPABLE Inventory.MaxAmount 1 }
actor FusionChargeLevel : Inventory { -INVBAR +INVENTORY.UNDROPPABLE Inventory.MaxAmount 35 }
actor FusionChargan : Inventory { -INVBAR +INVENTORY.UNDROPPABLE Inventory.MaxAmount 7 }
actor WMCCharge : Inventory { -INVBAR +INVENTORY.UNDROPPABLE Inventory.MaxAmount 2 }
actor ChargeLevel : Inventory { -INVBAR +INVENTORY.UNDROPPABLE Inventory.MaxAmount 7 }
actor ChargeLevel2 : Inventory { -INVBAR +INVENTORY.UNDROPPABLE Inventory.MaxAmount 7 }
actor InvasionDualShottyCheck : Inventory { -INVBAR +INVENTORY.UNDROPPABLE Inventory.MaxAmount 1 }
actor UsingSMG : Inventory { -INVBAR +INVENTORY.UNDROPPABLE Inventory.MaxAmount 1 }
actor UsingPistols : Inventory { -INVBAR +INVENTORY.UNDROPPABLE Inventory.MaxAmount 1 }
actor UsingDualPistols : Inventory { -INVBAR +INVENTORY.UNDROPPABLE Inventory.MaxAmount 1 }
actor UsingFists : Inventory { -INVBAR +INVENTORY.UNDROPPABLE Inventory.MaxAmount 1 }
actor UsingShotguns : Inventory { -INVBAR +INVENTORY.UNDROPPABLE Inventory.MaxAmount 1 }
actor UsingDualShotguns : Inventory { -INVBAR +INVENTORY.UNDROPPABLE Inventory.MaxAmount 1 }
actor UsingFusionPistol : Inventory { -INVBAR +INVENTORY.UNDROPPABLE Inventory.MaxAmount 1 }
actor UsingAssaultRifle : Inventory { -INVBAR +INVENTORY.UNDROPPABLE Inventory.MaxAmount 1 }
actor UsingSpanker : Inventory { -INVBAR +INVENTORY.UNDROPPABLE Inventory.MaxAmount 1 }
actor UsingToasty : Inventory { -INVBAR +INVENTORY.UNDROPPABLE Inventory.MaxAmount 1 }
actor UsingAlienWeapon : Inventory { -INVBAR +INVENTORY.UNDROPPABLE Inventory.MaxAmount 1 }
actor UsingAlienWeapon2 : Inventory { -INVBAR +INVENTORY.UNDROPPABLE Inventory.MaxAmount 1 }
actor UsingWMC : Inventory { -INVBAR +INVENTORY.UNDROPPABLE Inventory.MaxAmount 1 }

ACTOR MarathonMagnumBullet : FastProjectile
{
   Damage (random(20,28))
   Radius 8
   Height 8
   Speed 100
   Projectile
   Obituary "%k emptied %o's skull with a .44 Magnum."
   +BLOODSPLATTER
   +NOTIMEFREEZE
   +NOEXTREMEDEATH
   +SKYEXPLODE
   DamageType "MarathonPistol"
   Alpha 1.0
   Decal Bulletchip
   States
   {
   Spawn:
     TNT1 A 1
     loop
   Death:
     TNT1 A 1 A_SpawnItem("MarathonPuff")
     stop
   XDeath:
     TNT1 A 1 A_PlaySound("puff/hit")
	 stop
   Crash:
     TNT1 A 1 A_PlaySound("puff/ding")
	 stop
   }
}

ACTOR MarathonMagnumBulletCoop : MarathonMagnumBullet
{
Radius 1
Height 1
+THRUSPECIES
Speed 80
Species "Player"
}

ACTOR MarathonARBullet : FastProjectile
{
   Damage (random(9,15))
   Radius 8
   Height 8
   Speed 100
   Projectile
   Obituary "%k assaulted %o with the MA-75B."
   +BLOODSPLATTER
   +NOTIMEFREEZE
   +NOEXTREMEDEATH
   +THRUGHOST
   Alpha 1.0
   Decal Bulletchip
   States
   {
   Spawn:
     TNT1 A 1
     loop
   Death:
     TNT1 A 1 A_SpawnItem("MarathonPuff")
     stop
   XDeath:
     TNT1 A 1 A_PlaySound("puff/hit")
	 stop
   Crash:
     TNT1 A 1 A_PlaySound("puff/ding")
	 stop
   }
}

ACTOR MarathonARBulletCoop : MarathonARBullet
{
Radius 1
Height 1
Speed 80
+THRUSPECIES
Species "Player"
}

ACTOR MarathonShotgunBullet : FastProjectile
{
   Speed 100
   Damage (random(8,10))
   Radius 8
   Height 8
   Projectile
   Obituary "%k wasted %o with the WSTE-M5."
   +BLOODSPLATTER
   +NOTIMEFREEZE
   +NOEXTREMEDEATH
   +THRUGHOST
   Alpha 1.0
   Decal Bulletchip
   States
   {
   Spawn:
     TNT1 A 1
     loop
   Death:
     TNT1 A 1 A_SpawnItem("MarathonPuff")
     stop
   XDeath:
     TNT1 A 1 A_PlaySound("puff/hit")
	 stop
   Crash:
     TNT1 A 1 A_PlaySound("puff/ding")
	 stop
   }
}

ACTOR MarathonShotgunBulletCoop : MarathonShotgunBullet
{
Radius 1
Height 1
Speed 80
Damage (random(10,12))
+THRUSPECIES
Species "Player"
}

ACTOR MarathonSMGBullet : FastProjectile
{
   Damage (random(4,6))
   Radius 8
   Height 8
   Speed 100
   Projectile
	Obituary "%k shredded %o with the KKV-7."
   +BLOODSPLATTER
   +NOTIMEFREEZE
   +NOEXTREMEDEATH
   +THRUGHOST
   Alpha 1.0
   Decal Bulletchip
   States
   {
   Spawn:
     TNT1 A 1
     loop
   Death:
     TNT1 A 1 A_SpawnItem("MarathonPuff")
     stop
   XDeath:
     TNT1 A 1 A_PlaySound("puff/hit")
	 stop
   Crash:
     TNT1 A 1 A_PlaySound("puff/ding")
	 stop
   }
}

ACTOR MarathonSMGBulletCoop : MarathonSMGBullet
{
Radius 1
Height 1
Speed 80
Damage (random(9,15))
+THRUSPECIES
Species "Player"
}

ACTOR MarathonSMGBulletOverwater : MarathonSMGBullet
{
Radius 1
Height 1
Speed 80
Damage (random(5,9))
+THRUSPECIES
Species "Player"
}

ACTOR MarathonPuff : BulletPuff
{
	RenderStyle ADD
	Alpha 1
	Scale 0.5
	SeeSound "puff/ric"
	+FLOORCLIP
	+NOEXTREMEDEATH
	+FORCEXYBILLBOARD
	//+CLIENTSIDEONLY - Enabling this has it spawn when the bullets hit bleeding objects. WAT?
	-SOLID
	States
	{
	Spawn:
		TNT1 A 0
		MPUF A 2 Bright A_PlaySound("puff/ric")
		MPUF B 2 Bright
		MPUF C 2 Bright
		MPUF D 2 Bright
		MPUF E 2 Bright
		MPUF F 2 Bright
		MPUF G 2 Bright
		Stop
	}
}

//*****Fist*****

ACTOR BlankPuffMarathon : BulletPuff
{
  +CLIENTSIDEONLY
  +PUFFONACTORS
  +NOBLOOD
  //ActiveSound "marathon/fist/hit"
  AttackSound "marathon/fist/hit"
  //SeeSound "marathon/fist/hit"
   DamageType "Pistol"
  States
  {
  Melee:
  Spawn:
    TNT1 A 1 //A_PlaySound("marathon/fist/hit")
    Stop
  }
}

actor "Steel Knuckles" : Weapon replaces Fist
{
//Weapon.BobRangeX 0
	Weapon.SlotNumber 0
	Weapon.SelectionOrder 3700
	Obituary "%k snapped %o with a nasty hook."
  //AttackSound "marathon/fist/hit"
  Weapon.Kickback 300
  +WIMPY_WEAPON
  +MELEEWEAPON
  +NOALERT
  +INVENTORY.UNDROPPABLE
  +NOBLOOD
  States
  {
  Deselect:
	TNT1 A 0 A_JumpIfInventory("DOUBLEFISTING",1,"Deselect2")
	TNT1 A 0 A_TakeInventory("DOUBLEFISTING",1)
  	TNT1 A 0 A_Lower
    FIS2 A 1 A_Lower
    LOOP
  Select:
	TNT1 A 0 A_TakeInventory("UsingSMG",1)
	TNT1 A 0 A_TakeInventory("UsingPistols",1)
	//TNT1 A 0 A_TakeInventory("UsingFists",1)
	TNT1 A 0 A_TakeInventory("UsingShotguns",1)
	TNT1 A 0 A_TakeInventory("UsingFusionPistol",1)
	TNT1 A 0 A_TakeInventory("UsingAssaultRifle",1)
	TNT1 A 0 A_TakeInventory("UsingSpanker",1)
	TNT1 A 0 A_TakeInventory("UsingToasty",1)
	TNT1 A 0 A_TakeInventory("UsingAlienWeapon",1)
	TNT1 A 0 A_TakeInventory("UsingAlienWeapon2",1)
	TNT1 A 0 A_TakeInventory("UsingWMC",1)
	TNT1 A 0 A_TakeInventory("UsingDualPistols",1)
	TNT1 A 0 A_TakeInventory("UsingDualShotguns",1)
	
	TNT1 A 0 A_GiveInventory("UsingFists",1)
  	TNT1 A 0 A_Raise
    FIS2 A 1 A_Raise
    loop
  Ready:
	TNT1 A 0 A_JumpIfInventory("DOUBLEFISTING",1,"Ready2")
    FIS2 A 1 A_WeaponReady
	loop
  Deselect2:
	TNT1 A 0 A_TakeInventory("DOUBLEFISTING",1)
  	TNT1 A 0 A_Lower
	TNT1 A 0 A_TakeInventory("DOUBLEFISTING",1)
    FIS3 A 1 A_Lower
    LOOP
  Ready2:
    FIS3 A 1 A_WeaponReady
	loop
  Fire:
	TNT1 A 0 A_JumpIfInventory("DOUBLEFISTING",1,"LeftFist1")
    TNT1 A 0 A_JumpIf(momx >= 6,"Fire2")
    TNT1 A 0 A_JumpIf(momx <= -6,"Fire2")
    FIS2 B 3
    FIS2 C 4 A_CustomPunch(random(12,14),1,0,"BlankPuffMarathon",74)
	FIS2 B 3
    FIS2 A 7
    Goto Ready
  Fire2:
    FIS2 B 3
    FIS2 C 4 A_CustomPunch(random(60,70),1,0,"BlankPuffMarathon",74) // Formerly 50-60
	FIS2 B 3
    FIS2 A 7
    Goto Ready
  LeftFist1:
    TNT1 A 0 A_JumpIf(momx >= 6,"LeftFist2")
    TNT1 A 0 A_JumpIf(momx <= -6,"LeftFist2")
    FIS4 ABC 1
    FIS4 D 1 A_CustomPunch(random(12,14),1,0,"BlankPuffMarathon",74)
	FIS4 E 2
	FIS4 D 1
	FIS4 CBA 1
	FIS3 A 7
    Goto Ready
  LeftFist2:
    FIS4 ABC 1
    FIS4 D 1 A_CustomPunch(random(60,70),1,0,"BlankPuffMarathon",74) // Formerly 50-60
	FIS4 E 2
	FIS4 D 1
	FIS4 CBA 1
	FIS3 A 7
    Goto Ready

  AltFire:
	TNT1 A 0 A_JumpIfInventory("DOUBLEFISTING",1,"RightFist1")
	FIS3 KIGEDCBA 1//LKJIHGFEDDCCBBAA 1
	TNT1 A 0 A_GiveInventory("DOUBLEFISTING",1)
	goto Ready2
  RightFist1:
    TNT1 A 0 A_JumpIf(momx >= 6,"RightFist2")
    TNT1 A 0 A_JumpIf(momx <= -6,"RightFist2")
    FIS5 ABC 1
    FIS5 D 1 A_CustomPunch(random(12,14),1,0,"BlankPuffMarathon",74)
	FIS5 E 2
	FIS5 D 1
	FIS5 CBA 1
	FIS3 A 7
    Goto Ready
  RightFist2:
    FIS5 ABC 1
    FIS5 D 1 A_CustomPunch(random(60,70),1,0,"BlankPuffMarathon",74) // Formerly 50-60
	FIS5 E 2
	FIS5 D 1
	FIS5 CBA 1
	FIS3 A 7
    Goto Ready
	
  }
}

//*****Magnum*****

ACTOR 44mmCasingSpawner
{
    Radius 1
    Height 1
    Speed 25
    PROJECTILE
	+CLIENTSIDEONLY
    States
    {
    Spawn:
        TNT1 A 1
        TNT1 A 0 A_Die
        Goto Death
    Death:
        TNT1 A 0 A_CustomMissile("44mmCasing",1,5,random(-80,-110),2,random(30,40))
        Stop
    }
}

ACTOR 44mmCasingSpawner2 : 44mmCasingSpawner
{
	+CLIENTSIDEONLY
    States
    {
    Spawn:
        TNT1 A 1
        TNT1 A 0 A_Die
        Goto Death
    Death:
        TNT1 A 0 A_CustomMissile("44mmCasing",1,-5,random(80,110),2,random(30,40))
        Stop
    }
}

ACTOR 44mmCasing
{ 
    Scale 0.25
    Radius 3
    Height 3
    Speed 7
    Mass 5
	BounceCount 1
    +THRUACTORS +DROPOFF +MISSILE +NOTELEPORT +FLOORCLIP
    +FORCEXYBILLBOARD +DOOMBOUNCE
	+CLIENTSIDEONLY
    States
    {
    Spawn:
      PBLT ABCDEF 1
      Loop
    Death:
	  TNT1 A 1
      Stop
    }
}

ACTOR MagnumBullet : Ammo
{
    Inventory.MaxAmount 8
}

ACTOR MagnumBulletRight : Ammo
{
    Inventory.MaxAmount 8
}

ACTOR ".44 Magnum Mega Class A1" : Weapon// replaces Pistol
{
//Weapon.BobRangeX 0
	Weapon.SlotNumber 1
	Weapon.SelectionOrder 1900
	Decal BulletChip
	Inventory.PickupMessage "You picked up a .44 Magnum Mega Class A1!"
	Weapon.AmmoType		"MagnumBullet"
	Weapon.AmmoGive		0
	Weapon.AmmoUse		1
	Scale 0.35
	+AMMO_OPTIONAL
	+NOALERT
	+INVENTORY.UNDROPPABLE
	Radius				12
	Height				12
	States
	{
	Spawn:
		PSTL A -1
		STOP
	Ready:
		TNT1 A 0 A_JumpIfInventory("SynthFireActive",1,"Ready2")
		PIST A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfNoAmmo("SingleReload")
		LOOP
	SingleReload:
		PIST F 11 A_PlaySound("marathon/pistol/reload")
		PIST G 11
		PIST H 11
		TNT1 A 0 A_GiveInventory("MagnumBullet",8)
		Goto Ready
	Deselect:
		TNT1 A 0 A_JumpIfInventory("SynthFireActive",1,"Deselect2")
		TNT1 A 0 A_Lower
		PIST A 1 A_Lower
		LOOP
	Select:
	TNT1 A 0 A_TakeInventory("UsingSMG",1)
	//TNT1 A 0 A_TakeInventory("UsingPistols",1)
	TNT1 A 0 A_TakeInventory("UsingFists",1)
	TNT1 A 0 A_TakeInventory("UsingShotguns",1)
	TNT1 A 0 A_TakeInventory("UsingFusionPistol",1)
	TNT1 A 0 A_TakeInventory("UsingAssaultRifle",1)
	TNT1 A 0 A_TakeInventory("UsingSpanker",1)
	TNT1 A 0 A_TakeInventory("UsingToasty",1)
	TNT1 A 0 A_TakeInventory("UsingAlienWeapon",1)
	TNT1 A 0 A_TakeInventory("UsingAlienWeapon2",1)
	TNT1 A 0 A_TakeInventory("UsingWMC",1)
	TNT1 A 0 A_TakeInventory("UsingDualPistols",1)
	TNT1 A 0 A_TakeInventory("UsingDualShotguns",1)
	
	TNT1 A 0 A_GiveInventory("UsingPistols",1)
		TNT1 A 0 A_Raise
		PIST A 1 A_Raise
		LOOP
	Fire:
		TNT1 A 0 A_JumpIfInventory("SynthFireActive",1,"LFire")
		TNT1 A 0 A_JumpIfNoAmmo(13)
		TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"FireCoop")
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"FireCoop")
		TNT1 A 0 A_AlertMonsters//,0,0,0,0)
		TNT1 A 0 A_FireCustomMissile("MarathonMagnumBullet",random(-1,1),1,0,0,0,random(-1,1))//A_FireBullets(1,1,-1,20+random(0,8),"MarathonPuff")
		TNT1 A 0 A_PlayWeaponSound("marathon/pistol/fire")
		TNT1 A 0 A_FireCustomMissile("44mmCasingSpawner",0,0,8,0)
		PIST A 3 A_Light2
		PIST B 3 Bright A_Light1 
		PIST C 3 Bright A_Light0
		PIST D 3 
		PIST E 4 
		TNT1 A 0 A_Refire
		Goto Ready
		PIST A 1
		Goto SingleReload
	AltFire:
		TNT1 A 0 A_JumpIfInventory("SynthFireActive",1,"RFire")
		TNT1 A 0 A_JumpIfInventory("CanDualPistols",1,1)
		goto Ready
		PIS3 A 1 A_GiveInventory("SynthFireActive",1)
		PIS3 B 1 A_GiveInventory("UsingDualPistols",1)
		PIS3 C 1
		PIS3 DEFGHIJ 1 A_GiveInventory("UsingDualPistols",1)//ABCDEFGHIJKLMNOPQ 1
		TNT1 A 0 A_GunFlash
		PIS3 K 1 A_GiveInventory("SynthFireActive",1)
		goto Ready2
	FireCoop:
		TNT1 A 0 A_AlertMonsters//,0,0,0,0)
		TNT1 A 0 A_FireCustomMissile("MarathonMagnumBulletCoop",random(-1,1),1,0,0,0,random(-1,1))//A_FireBullets(1,1,-1,20+random(0,8),"MarathonPuff")
		TNT1 A 0 A_PlayWeaponSound("marathon/pistol/fire")
		TNT1 A 0 A_FireCustomMissile("44mmCasingSpawner",0,0,8,0)
		PIST A 3 A_Light2
		PIST B 3 Bright A_Light1 
		PIST C 3 Bright A_Light0
		PIST D 3 
		PIST E 4 
		TNT1 A 0 A_Refire
		Goto Ready
		PIST A 1
		Goto SingleReload
		
	
	Deselect2:
		TNT1 A 0 A_TakeInventory("SynthFireActive",1)
		TNT1 A 0 A_TakeInventory("SynthFireLeft",1)
		TNT1 A 0 A_TakeInventory("SynthFireRight",1)
		TNT1 A 0 A_TakeInventory("LeftReload",1)
		TNT1 A 0 A_TakeInventory("RightReload",1)
	   DS:
		TNT1 A 0 A_Lower
		PIS1 A 1 A_Lower
		Goto DS
	Ready2:
		PIS1 A 1 A_GunFlash
		TNT1 A 0 A_GiveInventory("SynthFireActive",1)
		TNT1 A 0 ACS_ExecuteAlways(791,0,0,0,0) //act.synth-fire LEFT(pri)
		TNT1 A 0 ACS_ExecuteAlways(792,0,0,0,0) //act.synth-fire RIGHT(sec)
	// Left Magnum
	LIdle:
		TNT1 A 0 A_JumpIfInventory("RightReload",1,"LInvisible")
		PIS1 A 1 A_WeaponReady(12)
		TNT1 A 0 A_JumpIfInventory("MagnumBullet",1,1)
		Goto LReload
		TNT1 A 0 A_JumpIfInventory("SynthFireLeft",1,"LFire")
    	Loop
	LInvisible:
		TNT1 A 33
		TNT1 A 0 A_TakeInventory("RightReload",1)
		Goto LIdle
	LReload:
		TNT1 A 0 A_JumpIfInventory("RightReload",1,"LInvisible")
		TNT1 A 0
		TNT1 A 0 A_GiveInventory("LeftReload",1)
		PIS1 F 11 A_PlayWeaponSound("marathon/pistol/reload")
		PIS1 G 11
		PIS1 H 11
		TNT1 A 0 A_GiveInventory("MagnumBullet",8)
		Goto LIdle
	LFire:
		TNT1 A 0 A_JumpIfInventory("RightReload",1,"LInvisible")
		TNT1 A 0 A_JumpIfInventory("MagnumBullet",1,1)
		Goto LReload//LIdle
		TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"LFireCoop")
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"LFireCoop")
		TNT1 A 0 A_AlertMonsters//,0,0,0,0)
		TNT1 A 0 A_TakeInventory("MagnumBullet",1)
		TNT1 A 0 A_FireCustomMissile("MarathonMagnumBullet",random(-1,1),0,0,0,0,random(-1,1))//A_FireBullets(1,1,-1,20+random(0,8),"MarathonPuff")
		TNT1 A 0 A_PlayWeaponSound("marathon/pistol/fire")
		TNT1 A 0 A_FireCustomMissile("44mmCasingSpawner",0,0,8,0)
		TNT1 A 0 A_JumpIfInventory("RightReload",1,"LInvisible")
		PIS1 A 3 A_Light2
		TNT1 A 0 A_JumpIfInventory("RightReload",1,"LInvisible")
		PIS1 B 3 Bright A_Light1 
		TNT1 A 0 A_JumpIfInventory("RightReload",1,"LInvisible")
		PIS1 C 3 Bright A_Light0
		TNT1 A 0 A_JumpIfInventory("RightReload",1,"LInvisible")
		PIS1 D 3 
		TNT1 A 0 A_JumpIfInventory("RightReload",1,"LInvisible")
		PIS1 E 4 
		TNT1 A 0 A_JumpIfInventory("SynthFireLeft",1,"LFire")
		Goto LIdle
	LFireCoop:
		TNT1 A 0 A_AlertMonsters//,0,0,0,0)
		TNT1 A 0 A_TakeInventory("MagnumBullet",1)
		TNT1 A 0 A_FireCustomMissile("MarathonMagnumBulletCoop",random(-1,1),0,0,0,0,random(-1,1))//A_FireBullets(1,1,-1,20+random(0,8),"MarathonPuff")
		TNT1 A 0 A_PlayWeaponSound("marathon/pistol/fire")
		TNT1 A 0 A_FireCustomMissile("44mmCasingSpawner",0,0,8,0)
		TNT1 A 0 A_JumpIfInventory("RightReload",1,"LInvisible")
		PIS1 A 3 A_Light2
		TNT1 A 0 A_JumpIfInventory("RightReload",1,"LInvisible")
		PIS1 B 3 Bright A_Light1 
		TNT1 A 0 A_JumpIfInventory("RightReload",1,"LInvisible")
		PIS1 C 3 Bright A_Light0
		TNT1 A 0 A_JumpIfInventory("RightReload",1,"LInvisible")
		PIS1 D 3 
		TNT1 A 0 A_JumpIfInventory("RightReload",1,"LInvisible")
		PIS1 E 4 
		TNT1 A 0 A_JumpIfInventory("SynthFireLeft",1,"LFire")
		Goto LIdle
	// Right Magnum
	Flash:
		PIS2 A 8
	RIdle:
		TNT1 A 0 A_JumpIfInventory("LeftReload",1,"RInvisible")
		PIS2 A 1
		TNT1 A 0 A_JumpIfInventory("MagnumBulletRight",1,1)
		Goto RReload
		TNT1 A 0 A_JumpIfInventory("SynthFireRight",1,"RFire")
    	Loop
	RInvisible:
		TNT1 A 33
		TNT1 A 0 A_TakeInventory("LeftReload",1)
		Goto RIdle
	RReload:
		TNT1 A 0 A_JumpIfInventory("LeftReload",1,"RInvisible")
		TNT1 A 0 //A_JumpIfInventory("MagnumClip",1,1)
		//Goto RIdle
		TNT1 A 0 A_GiveInventory("RightReload",1)
		PIS2 F 11 A_PlayWeaponSound("marathon/pistol/reload")
		PIS2 G 11
		PIS2 H 11
		TNT1 A 0 //A_TakeInventory("MagnumBulletRight",8)
		TNT1 A 0 //A_TakeInventory("MagnumClip",1)
		TNT1 A 0 A_GiveInventory("MagnumBulletRight",8)
		Goto RIdle
	RFire:
		TNT1 A 0 A_JumpIfInventory("LeftReload",1,"RInvisible")
		TNT1 A 0 A_JumpIfInventory("MagnumBulletRight",1,1)
		Goto RReload//RIdle
		TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"RFireCoop")
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"RFireCoop")
		TNT1 A 0 A_AlertMonsters//,0,0,0,0)
		TNT1 A 0 A_TakeInventory("MagnumBulletRight",1)
		TNT1 A 0 A_FireCustomMissile("MarathonMagnumBullet",random(-1,1),0,0,0,0,random(-1,1))//A_FireBullets(1,1,-1,20+random(0,8),"MarathonPuff")
		TNT1 A 0 A_PlayWeaponSound("marathon/pistol/fire")
		TNT1 A 0 A_FireCustomMissile("44mmCasingSpawner2",0,0,-8,0)
		PIS2 A 3 A_Light2
		TNT1 A 0 A_JumpIfInventory("LeftReload",1,"RInvisible")
		PIS2 B 3 Bright A_Light1 
		TNT1 A 0 A_JumpIfInventory("LeftReload",1,"RInvisible")
		PIS2 C 3 Bright A_Light0
		TNT1 A 0 A_JumpIfInventory("LeftReload",1,"RInvisible")
		PIS2 D 3 
		TNT1 A 0 A_JumpIfInventory("LeftReload",1,"RInvisible")
		PIS2 E 4 
		TNT1 A 0 A_JumpIfInventory("SynthFireRight",1,"RFire")
		Goto RIdle
	RFireCoop:
		TNT1 A 0 A_AlertMonsters//,0,0,0,0)
		TNT1 A 0 A_TakeInventory("MagnumBulletRight",1)
		TNT1 A 0 A_FireCustomMissile("MarathonMagnumBulletCoop",random(-1,1),0,0,0,0,random(-1,1))//A_FireBullets(1,1,-1,20+random(0,8),"MarathonPuff")
		TNT1 A 0 A_PlayWeaponSound("marathon/pistol/fire")
		TNT1 A 0 A_FireCustomMissile("44mmCasingSpawner2",0,0,-8,0)
		PIS2 A 3 A_Light2
		TNT1 A 0 A_JumpIfInventory("LeftReload",1,"RInvisible")
		PIS2 B 3 Bright A_Light1 
		TNT1 A 0 A_JumpIfInventory("LeftReload",1,"RInvisible")
		PIS2 C 3 Bright A_Light0
		TNT1 A 0 A_JumpIfInventory("LeftReload",1,"RInvisible")
		PIS2 D 3 
		TNT1 A 0 A_JumpIfInventory("LeftReload",1,"RInvisible")
		PIS2 E 4 
		TNT1 A 0 A_JumpIfInventory("SynthFireRight",1,"RFire")
		Goto RIdle
	}
}


//*****SMG*****

ACTOR FlechetteCasingSpawner
{
    Radius 1
    Height 1
    Speed 25
    PROJECTILE
	+CLIENTSIDEONLY
    States
    {
    Spawn:
        TNT1 A 1
        TNT1 A 0 A_Die
        Goto Death
    Death:
        TNT1 A 0 A_CustomMissile("FlechetteCasing",1,5,random(-80,-110),2,random(30,40))
        Stop
    }
}

ACTOR FlechetteCasing
{ 
    Scale 0.25
    Radius 3
    Height 3
    Speed 7
    Mass 5
	BounceCount 1
	+CLIENTSIDEONLY
    +THRUACTORS +DROPOFF +MISSILE +NOTELEPORT +FLOORCLIP
    +FORCEXYBILLBOARD +DOOMBOUNCE
    States
    {
    Spawn:
      FLEC ABCDEF 1
      Loop
    Death:
	  TNT1 A 1
      Stop
    }
}

ACTOR SmgBullet : Ammo
{
	+IGNORESKILL
    Inventory.MaxAmount 32
}

ACTOR "KKV-7 SMG Flechette" : Weapon// replaces SuperShotgun
{
//Weapon.BobRangeX 0
	Weapon.SelectionOrder 2200
	Weapon.SlotNumber 1
	Decal BulletChip
	Inventory.PickupMessage "You picked up a KKV-7 SMG Flechette!"
	Weapon.AmmoType		"SmgBullet"
	Weapon.AmmoGive		0
	Weapon.AmmoUse		1
	Scale 0.35
	+AMMO_OPTIONAL
	+NOALERT
	+INVENTORY.UNDROPPABLE
	Radius				12
	Height				12
	States
	{
	Spawn:
		FSMG A -1
		STOP
	Ready:
		HSMG A 1 A_WeaponReady
		LOOP
	Deselect:
		TNT1 A 0 A_Lower
		HSMG A 1 A_Lower
		LOOP
	Select:
	//TNT1 A 0 A_TakeInventory("UsingSMG",1)
	TNT1 A 0 A_TakeInventory("UsingPistols",1)
	TNT1 A 0 A_TakeInventory("UsingFists",1)
	TNT1 A 0 A_TakeInventory("UsingShotguns",1)
	TNT1 A 0 A_TakeInventory("UsingFusionPistol",1)
	TNT1 A 0 A_TakeInventory("UsingAssaultRifle",1)
	TNT1 A 0 A_TakeInventory("UsingSpanker",1)
	TNT1 A 0 A_TakeInventory("UsingToasty",1)
	TNT1 A 0 A_TakeInventory("UsingAlienWeapon",1)
	TNT1 A 0 A_TakeInventory("UsingAlienWeapon2",1)
	TNT1 A 0 A_TakeInventory("UsingWMC",1)
	TNT1 A 0 A_TakeInventory("UsingDualPistols",1)
	TNT1 A 0 A_TakeInventory("UsingDualShotguns",1)
	
	TNT1 A 0 A_GiveInventory("UsingSMG",1)
		TNT1 A 0 A_Raise
		HSMG A 1 A_Raise
		LOOP
	Fire:
		TNT1 A 0 A_JumpIfNoAmmo("DryFire")
		TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"CoopFire")
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"CoopFire")
		TNT1 A 0 A_AlertMonsters//,0,0,0,0)
		TNT1 A 0 A_FireCustomMissile("MarathonSMGBullet",random(-1,1),1,0,0,0,random(-1,1))
		TNT1 A 0 A_FireCustomMissile("MarathonSMGBullet",random(-1,1),1,0,0,0,random(-1,1))
		TNT1 A 0 A_PlayWeaponSound("marathon/smg/fire")
		TNT1 A 0 A_FireCustomMissile("FlechetteCasingSpawner",0,0,0,0)
		TNT1 A 0 A_FireCustomMissile("FlechetteCasingSpawner",0,0,0,0)
		HSMG B 1 Offset (0,27) Bright
        TNT1 A 0 A_Light2
        HSMG B 1 Offset (0,27) Bright
        TNT1 A 0 A_Light1
        HSMG A 1 Offset (0,31) Bright
        TNT1 A 0 A_Light0
		TNT1 A 0 A_Refire
		Goto Ready
	CoopFire:
		TNT1 A 0 A_JumpIf(waterlevel == 3, "UnderwaterCoopFire")
		TNT1 A 0 A_AlertMonsters//,0,0,0,0)
		TNT1 A 0 A_FireCustomMissile("MarathonSMGBulletOverwater",random(-1,1),1,0,0,0,random(-1,1))
		TNT1 A 0 A_FireCustomMissile("MarathonSMGBulletOverwater",random(-1,1),1,0,0,0,random(-1,1))
		TNT1 A 0 A_PlayWeaponSound("marathon/smg/fire")
		TNT1 A 0 A_FireCustomMissile("FlechetteCasingSpawner",0,0,0,0)
		TNT1 A 0 A_FireCustomMissile("FlechetteCasingSpawner",0,0,0,0)
		HSMG B 1 Offset (0,27) Bright
        TNT1 A 0 A_Light2
        HSMG B 1 Offset (0,27) Bright
        TNT1 A 0 A_Light1
        HSMG A 1 Offset (0,31) Bright
        TNT1 A 0 A_Light0
		TNT1 A 0 A_Refire
		Goto Ready
	UnderwaterCoopFire:
		TNT1 A 0 A_AlertMonsters//,0,0,0,0)
		TNT1 A 0 A_FireCustomMissile("MarathonSMGBulletCoop",random(-1,1),1,0,0,0,random(-1,1))
		TNT1 A 0 A_FireCustomMissile("MarathonSMGBulletCoop",random(-1,1),1,0,0,0,random(-1,1))
		TNT1 A 0 A_PlayWeaponSound("marathon/smg/fire")
		TNT1 A 0 A_FireCustomMissile("FlechetteCasingSpawner",0,0,0,0)
		TNT1 A 0 A_FireCustomMissile("FlechetteCasingSpawner",0,0,0,0)
		HSMG B 1 Offset (0,27) Bright
        TNT1 A 0 A_Light2
        HSMG B 1 Offset (0,27) Bright
        TNT1 A 0 A_Light1
        HSMG A 1 Offset (0,31) Bright
        TNT1 A 0 A_Light0
		TNT1 A 0 A_Refire
		Goto Ready
	DryFire:
		TNT1 A 0 A_JumpIfInventory("Clip",1,"Reload")
		HSMG A 3 A_PlaySound("marathon/rifle/dryfire")
		Goto Ready
		TNT1 A 0
	Reload:
        HSMG C 5
        HSMG C 6 A_PlayWeaponSound("marathon/smg/reload")
        HSMG D 11
        HSMG E 11
	Reload2:
		TNT1 A 0 A_TakeInventory("Clip",1)
        TNT1 A 0 A_GiveInventory("SmgBullet",1)
        TNT1 A 0 A_JumpIfInventory("SmgBullet",0,3)
        TNT1 A 0 A_JumpIfInventory("Clip",1,1)
		Goto Ready
		TNT1 A 0
        Goto Reload2
		TNT1 A 0
		HSMG A 1
		Goto Ready
	}
}

ACTOR "WSTE-M5 Combat Shotgun" : Weapon
{
//Weapon.BobRangeX 0
	Weapon.SelectionOrder 400
	Weapon.SlotNumber 2
	Decal BulletChip
	Inventory.PickupMessage "You picked up a WSTE-M5 Combat Shotgun!"
	Weapon.AmmoType		"AmmoShell"
	Weapon.AmmoGive		8
	Weapon.AmmoUse		2
	Scale 0.35
	+NOALERT
	+INVENTORY.UNDROPPABLE
	Radius				12
	Height				12
	States
	{
	Spawn:
		SHTY A -1
		STOP
	Ready:
		TNT1 A 0 A_JumpIfInventory("SynthFireActive",1,"Ready2")
		MSHT A 1 A_WeaponReady
		LOOP
	Deselect:
		TNT1 A 0 A_JumpIfInventory("SynthFireActive",1,"Deselect2")
		TNT1 A 0 A_Lower
		MSHT A 1 A_Lower
		LOOP
	Select:
	TNT1 A 0 A_TakeInventory("UsingSMG",1)
	TNT1 A 0 A_TakeInventory("UsingPistols",1)
	TNT1 A 0 A_TakeInventory("UsingFists",1)
	//TNT1 A 0 A_TakeInventory("UsingShotguns",1)
	TNT1 A 0 A_TakeInventory("UsingFusionPistol",1)
	TNT1 A 0 A_TakeInventory("UsingAssaultRifle",1)
	TNT1 A 0 A_TakeInventory("UsingSpanker",1)
	TNT1 A 0 A_TakeInventory("UsingToasty",1)
	TNT1 A 0 A_TakeInventory("UsingAlienWeapon",1)
	TNT1 A 0 A_TakeInventory("UsingAlienWeapon2",1)
	TNT1 A 0 A_TakeInventory("UsingWMC",1)
	TNT1 A 0 A_TakeInventory("UsingDualPistols",1)
	TNT1 A 0 A_TakeInventory("UsingDualShotguns",1)
	
	TNT1 A 0 A_GiveInventory("UsingShotguns",1)
		TNT1 A 0 A_Raise
		MSHT A 1 A_Raise
		LOOP
	Fire:
		TNT1 A 0 A_JumpIf(waterlevel == 3, "NothingFire")
		MSHT A 1
		TNT1 A 0 A_JumpIfInventory("SynthFireActive",1,"LFire")
		MSHT A 1
		TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"CoopFire")
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"CoopFire")
		TNT1 AAAAAAAAA 0 A_FireCustomMissile("MarathonShotgunBullet",random(-4,4),0,0,0,0,random(-4,4))
		TNT1 A 0 A_FireCustomMissile("MarathonShotgunBullet",random(-4,4),1,0,0,0,random(-4,4))
		TNT1 A 0 A_PlayWeaponSound("marathon/shotgun/fire")
		MSHT A 1 A_AlertMonsters
		MSHT A 1 A_Light2
		MSHT B 4 Bright A_Light1 
		MSHT C 5 Bright A_Light0
		MSHT D 5 Bright
		MSHT F 4 A_PlaySound("marathon/shotgun/reload")
		MSHT G 4
		MSHT H 4
		MSHT I 5
		MSHT J 5
		MSHT A 3
		TNT1 A 0 A_Refire
		Goto Ready
	CoopFire:
		TNT1 AAAAAAAAA 0 A_FireCustomMissile("MarathonShotgunBulletCoop",random(-4,4),0,0,0,0,random(-4,4))
		TNT1 A 0 A_FireCustomMissile("MarathonShotgunBulletCoop",random(-4,4),1,0,0,0,random(-4,4))
		TNT1 A 0 A_PlayWeaponSound("marathon/shotgun/fire")
		MSHT A 1 A_AlertMonsters
		MSHT A 1 A_Light2
		MSHT B 4 Bright A_Light1 
		MSHT C 5 Bright A_Light0
		MSHT D 5 Bright
		MSHT F 4 A_PlaySound("marathon/shotgun/reload")
		MSHT G 4
		MSHT H 4
		MSHT I 5
		MSHT J 5
		MSHT A 3
		TNT1 A 0 A_Refire
		Goto Ready
	AltFire:
		TNT1 A 0 A_JumpIfInventory("SynthFireActive",1,"RFire")
		TNT1 A 0 A_JumpIfInventory("CanDualShotties",1,1)
		goto Ready
		SHT3 BDFHJLNOPQ 1 A_GiveInventory("UsingDualShotguns",1)
		TNT1 A 0 A_GunFlash
		SHT3 R 1 A_GiveInventory("SynthFireActive",1)
		goto Ready2
	NothingFire:
		TNT1 A 0
		goto Ready
		
// Dual shotgun modes
	
	Deselect2:
		TNT1 A 0 A_TakeInventory("SynthFireActive",1)
		TNT1 A 0 A_TakeInventory("SynthFireLeft",1)
		TNT1 A 0 A_TakeInventory("SynthFireRight",1)
	   DS:
	   	TNT1 A 0 A_Lower
		SHT1 A 1 A_Lower
		Goto DS
	Ready2:
		SHT1 A 1 A_GunFlash
		TNT1 A 0 A_GiveInventory("SynthFireActive",1)
		TNT1 A 0 ACS_ExecuteAlways(791,0,0,0,0) //act.synth-fire LEFT(pri)
		TNT1 A 0 ACS_ExecuteAlways(792,0,0,0,0) //act.synth-fire RIGHT(sec)
	// Left Shotgun
	LIdle:
		SHT1 A 1 A_WeaponReady(12)
		TNT1 A 0 A_JumpIfInventory("SynthFireLeft",1,"LFire")
    	Loop
	LFire:
		TNT1 A 0 A_JumpIf(waterlevel == 3, "NothingFire")
		SHT1 A 1
		TNT1 A 0 A_JumpIfInventory("AmmoShell",1,1)
		Goto LIdle
		SHT1 A 1
		TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"LCoopFire")
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"LCoopFire")
		TNT1 AAAAAAAAA 0 A_FireCustomMissile("MarathonShotgunBullet",random(-4,4),0,0,0,0,random(-4,4))
		TNT1 A 0 A_FireCustomMissile("MarathonShotgunBullet",random(-4,4),1,0,0,0,random(-4,4))
		TNT1 A 0 A_PlayWeaponSound("marathon/shotgun/fire")
		TNT1 A 0 A_TakeInventory("AmmoShell",2)
		SHT1 A 1 A_AlertMonsters
		SHT1 A 1 A_Light2
		SHT1 B 4 Bright A_Light1 
		SHT1 C 5 Bright A_Light0
		SHT1 D 5 Bright
		TNT1 A 0 A_JumpIfNoAmmo("LEmpty")
		SHT1 F 4 A_PlaySound("marathon/shotgun/reload")
		SHT1 G 4
		SHT1 H 4
		SHT1 I 5
		SHT1 J 5
		SHT1 A 3
		TNT1 A 0 A_JumpIfInventory("SynthFireLeft",1,"LFire")
		Goto LIdle
	LCoopFire:
		TNT1 AAAAAAAAA 0 A_FireCustomMissile("MarathonShotgunBulletCoop",random(-4,4),0,0,0,0,random(-4,4))
		TNT1 A 0 A_FireCustomMissile("MarathonShotgunBulletCoop",random(-4,4),1,0,0,0,random(-4,4))
		TNT1 A 0 A_PlayWeaponSound("marathon/shotgun/fire")
		TNT1 A 0 A_TakeInventory("AmmoShell",2)
		SHT1 A 1 A_AlertMonsters
		SHT1 A 1 A_Light2
		SHT1 B 4 Bright A_Light1 
		SHT1 C 5 Bright A_Light0
		SHT1 D 5 Bright
		TNT1 A 0 A_JumpIfNoAmmo("LEmpty")
		SHT1 F 4 A_PlaySound("marathon/shotgun/reload")
		SHT1 G 4
		SHT1 H 4
		SHT1 I 5
		SHT1 J 5
		SHT1 A 3
		TNT1 A 0 A_JumpIfInventory("SynthFireLeft",1,"LFire")
		Goto LIdle
	// Right Shotgun
	Flash:
		SHT2 A 8
	RIdle:
		SHT2 A 1
		TNT1 A 0 A_JumpIfInventory("SynthFireRight",1,"RFire")
    	Loop
	RFire:
		TNT1 A 0 A_JumpIf(waterlevel == 3, "RIdle")
		SHT2 A 1
		TNT1 A 0 A_JumpIfInventory("AmmoShell",1,1)
		Goto RIdle
		SHT2 A 1
		TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"RCoopFire")
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"RCoopFire")
		TNT1 AAAAAAAAA 0 A_FireCustomMissile("MarathonShotgunBullet",random(-4,4),0,0,0,0,random(-4,4))
		TNT1 A 0 A_FireCustomMissile("MarathonShotgunBullet",random(-4,4),1,0,0,0,random(-4,4))
		TNT1 A 0 A_PlayWeaponSound("marathon/shotgun/fire")
		TNT1 A 0 A_TakeInventory("AmmoShell",2)
		SHT2 A 1 A_AlertMonsters
		SHT2 A 1 A_Light2
		SHT2 B 4 Bright A_Light1 
		SHT2 C 5 Bright A_Light0
		SHT2 D 5 Bright
		TNT1 A 0 A_JumpIfNoAmmo("REmpty")
		SHT2 F 4 A_PlaySound("marathon/shotgun/reload")
		SHT2 G 4
		SHT2 H 4
		SHT2 I 5
		SHT2 J 5
		SHT2 A 3
		TNT1 A 0 A_JumpIfInventory("SynthFireRight",1,"RFire")
		Goto RIdle
	RCoopFire:
		TNT1 AAAAAAAAA 0 A_FireCustomMissile("MarathonShotgunBulletCoop",random(-4,4),0,0,0,0,random(-4,4))
		TNT1 A 0 A_FireCustomMissile("MarathonShotgunBulletCoop",random(-4,4),1,0,0,0,random(-4,4))
		TNT1 A 0 A_PlayWeaponSound("marathon/shotgun/fire")
		TNT1 A 0 A_TakeInventory("AmmoShell",2)
		SHT2 A 1 A_AlertMonsters
		SHT2 A 1 A_Light2
		SHT2 B 4 Bright A_Light1 
		SHT2 C 5 Bright A_Light0
		SHT2 D 5 Bright
		TNT1 A 0 A_JumpIfNoAmmo("REmpty")
		SHT2 F 4 A_PlaySound("marathon/shotgun/reload")
		SHT2 G 4
		SHT2 H 4
		SHT2 I 5
		SHT2 J 5
		SHT2 A 3
		TNT1 A 0 A_JumpIfInventory("SynthFireRight",1,"RFire")
		Goto RIdle
	LEmpty:
		SHT1 E 5
		SHT1 A 3
		goto LIdle
	REmpty:
		SHT2 E 5
		SHT2 A 3
		goto RIdle
	}
}

//*****Fusion Pistol*****

ACTOR FusionBullet : Ammo
{
	+IGNORESKILL
    Inventory.MaxAmount 20
}

ACTOR FusionShot
{
	Decal DoomImpScorch
	Radius 6
	Height 8
	Speed 25
	Damage (30+random(0,10))
	DamageType "MarathonFusion"
	Scale 0.35
	DeathSound "marathon/fusion/hit"
	+FOILINVUL
	+PIERCEARMOR
	Obituary "%k fused %o with the dirt."
	Projectile
	States
	{
	Spawn:
		FSHT ABC 2 Bright
		LOOP
	Death:
		FHIT ABCD 2 Bright
		STOP
	}
}

ACTOR FusionShotCoop : FusionShot
{
Speed 20
+THRUSPECIES
Species "Player"
}

ACTOR FusionShotWater
{
	Decal DoomImpScorch
	Radius 6
	Height 8
	Speed 20
	Damage 0//(30+random(0,10))
	DamageType "MarathonFusion"
	Scale 0.35
	DeathSound "marathon/fusion/hit"
	+FOILINVUL
	Obituary "%k fused %o with the dirt."
	Projectile
	States
	{
	Spawn:
		FSHT A 2 Bright
	Death:
		TNT1 A 0 A_Stop
		TNT1 A 0 A_Explode(random(30,40),128)
		FHIT ABCD 2 Bright
		STOP
	}
}

ACTOR FusionSuper
{
	Decal Scorch
	Radius 8
	Height 8
	Speed 35
	Damage (80+random(0,20))
	DamageType "MarathonFusion"
	Scale 0.75
	DeathSound "marathon/fusion/hit"
	+FOILINVUL
	+PIERCEARMOR
	Obituary "%k fused %o with the dirt."
	Projectile
	States
	{
	Spawn:
		CHGB ABC 3 Bright A_SpawnItem("FusionTrail")
		LOOP
	Death:
		FHIT ABCD 2 Bright
		STOP
	}
}

ACTOR FusionSuperCoop : FusionSuper
{
Speed 30
+THRUSPECIES
Species "Player"
}

actor FusionTrail
{
  +RANDOMIZE
  +NOCLIP
  +NOGRAVITY
  Speed 0
  Scale 0.75
  +CLIENTSIDEONLY
  states
  {
  Spawn:
    TNT1 A 2
    FSCT ABC 2 BRIGHT
    stop
  }
}

ACTOR FusionShotWater2
{
	Decal Scorch
	Radius 6
	Height 8
	Speed 30
	Damage 0//(80+random(0,20))
	DamageType "MarathonFusion"
	Scale 0.75
	DeathSound "marathon/fusion/hit"
	+FOILINVUL
	Obituary "%k fused %o with the dirt."
	Projectile
	States
	{
	Spawn:
		CHGB A 2 Bright
	Death:
		TNT1 A 0 A_Stop
		TNT1 A 0 A_Explode(random(80,100),128)
		FHIT ABCD 4 Bright
		STOP
	}
}

ACTOR "Fusion Pistol" : Weapon// replaces PlasmaRifle
{
//Weapon.BobRangeX 0
	Weapon.SelectionOrder 1300
	Weapon.SlotNumber 3
	Inventory.PickupMessage "You picked up a Zeus Class Fusion Pistol!"
	Weapon.AmmoType		"FusionBullet"
	Weapon.AmmoGive		0
	Weapon.AmmoUse		1
	Scale 0.35
	+AMMO_OPTIONAL
	+NOALERT
	+INVENTORY.UNDROPPABLE
	Radius				12
	Height				12
	States
	{
	Spawn:
		FUSP A -1
		STOP
	Ready:
		FUSN A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("FusionBullet",1,"Ready")
	Reload:
		TNT1 A 0 A_JumpIfInventory("Cell",1,1)
		goto Ready
		FUSN A 0 A_PlaySound("marathon/fusion/reload")
		FUSN A 1 A_Lower
		FUSN A 0 A_Lower
		FUSN A 1 A_Lower
		FUSN A 0 A_Lower
		FUSN A 1 A_Lower
		FUSN A 0 A_Lower
		FUSN A 1 A_Lower
		FUSN A 0 A_Lower
		FUSN A 1 A_Lower
		FUSN A 0 A_Lower
		FUSN A 1 A_Lower
		FUSN A 0 A_Lower
		FUSN A 1 A_Lower
		FUSN A 0 A_Lower
		FUSN A 1 A_Lower
		TNT1 A 25
		FUSN A 1 A_Raise
		FUSN A 0 A_Raise
		FUSN A 1 A_Raise
		FUSN A 0 A_Raise
		FUSN A 1 A_Raise
		FUSN A 0 A_Raise
		FUSN A 1 A_Raise
		FUSN A 0 A_Raise
		FUSN A 1 A_Raise
		FUSN A 0 A_Raise
		FUSN A 1 A_Raise
		FUSN A 0 A_Raise
		FUSN A 1 A_Raise
		//FUSN A 0 A_Raise
		//FUSN A 1 A_Raise
		goto Reload2
	Reload2:
		TNT1 A 0 A_TakeInventory("Cell",1)
        TNT1 A 0 A_GiveInventory("FusionBullet",1)
        TNT1 A 0 A_JumpIfInventory("FusionBullet",0,3)
        TNT1 A 0 A_JumpIfInventory("Cell",1,1)
		Goto Ready
		TNT1 A 0
        Goto Reload2
		TNT1 A 0
		FUSN A 1
		Goto Ready
	Deselect:
		TNT1 A 0 A_Lower
		FUSN A 1 A_Lower
		LOOP
	Select:
	TNT1 A 0 A_TakeInventory("UsingSMG",1)
	TNT1 A 0 A_TakeInventory("UsingPistols",1)
	TNT1 A 0 A_TakeInventory("UsingFists",1)
	TNT1 A 0 A_TakeInventory("UsingShotguns",1)
	//TNT1 A 0 A_TakeInventory("UsingFusionPistol",1)
	TNT1 A 0 A_TakeInventory("UsingAssaultRifle",1)
	TNT1 A 0 A_TakeInventory("UsingSpanker",1)
	TNT1 A 0 A_TakeInventory("UsingToasty",1)
	TNT1 A 0 A_TakeInventory("UsingAlienWeapon",1)
	TNT1 A 0 A_TakeInventory("UsingAlienWeapon2",1)
	TNT1 A 0 A_TakeInventory("UsingWMC",1)
	TNT1 A 0 A_TakeInventory("UsingDualPistols",1)
	TNT1 A 0 A_TakeInventory("UsingDualShotguns",1)
	
	TNT1 A 0 A_GiveInventory("UsingFusionPistol",1)
		TNT1 A 0 A_Raise
		FUSN A 1 A_Raise
		LOOP
	Fire:
		TNT1 A 0 A_JumpIf(waterlevel == 3, "WaterFire1")
		FUSN A 1
		TNT1 A 0 A_JumpIfNoAmmo("Reload")
		TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"CoopFire")
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"CoopFire")
		TNT1 A 0 A_AlertMonsters//,0,0,0,0)
		TNT1 A 0 A_FireCustomMissile("FusionShot",random(-1,1),1,0,6,0,random(-1,1))
		TNT1 A 0 A_PlaySound("marathon/fusion/fire")
		FUSN A 2 A_Light2
		FUSN B 2 Bright A_Light1 
		FUSN C 2 A_Light0
		FUSN D 3
		TNT1 A 0 A_Refire
		Goto Ready
	CoopFire:
		TNT1 A 0 A_AlertMonsters//,0,0,0,0)
		TNT1 A 0 A_FireCustomMissile("FusionShotCoop",random(-1,1),1,0,6,0,random(-1,1))
		TNT1 A 0 A_PlaySound("marathon/fusion/fire")
		FUSN A 2 A_Light2
		FUSN B 2 Bright A_Light1 
		FUSN C 2 A_Light0
		FUSN D 3
		TNT1 A 0 A_Refire
		Goto Ready
	AltFire:
		TNT1 A 0 A_JumpIfInventory("FusionBullet",1,1)
		goto Ready
		FUSN A 1 A_PlaySoundEx("marathon/fusion/charge","soundslot7",0,0)
		TNT1 A 0 A_GiveInventory("FusionChargan",3)
	AltHold:
		TNT1 A 0 A_JumpIfInventory("FusionChargan",7,"Chargan")
		FUSN A 5
		TNT1 A 0 A_GiveInventory("FusionChargan",1)
		TNT1 A 0 A_Refire
		TNT1 A 0 A_JumpIfInventory("FusionChargeLevel",1,"AltChargeFire")
		TNT1 A 0 A_TakeInventory("FusionChargan",7)
		goto Ready
	AltChargeFire:
		TNT1 A 0 A_JumpIf(waterlevel == 3, "WaterFire2")
		FUSN A 1
		TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"AltCoopFire")
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"AltCoopFire")
		TNT1 A 0 A_AlertMonsters//,0,0,0,0)
		TNT1 A 0 A_TakeInventory("FusionBullet",4)
		TNT1 A 0 A_TakeInventory("FusionChargan",7)
		TNT1 A 0 A_TakeInventory("FusionChargeLevel",35)
		TNT1 A 0 A_FireCustomMissile("FusionSuper",random(-1,1),0,0,6,0,random(-1,1))
		TNT1 A 0 A_PlayWeaponSound("marathon/fusion/super")
		FUSN A 4 A_Light2
		FUSN B 4 Bright A_Light1
		FUSN C 4 A_Light0
		FUSN D 4
		Goto Ready
	AltCoopFire:
		TNT1 A 0 A_AlertMonsters//,0,0,0,0)
		TNT1 A 0 A_TakeInventory("FusionBullet",4)
		TNT1 A 0 A_TakeInventory("FusionChargan",7)
		TNT1 A 0 A_TakeInventory("FusionChargeLevel",35)
		TNT1 A 0 A_FireCustomMissile("FusionSuperCoop",random(-1,1),0,0,6,0,random(-1,1))
		TNT1 A 0 A_PlayWeaponSound("marathon/fusion/super")
		FUSN A 4 A_Light2
		FUSN B 4 Bright A_Light1
		FUSN C 4 A_Light0
		FUSN D 4
		Goto Ready
	Chargan:
		TNT1 A 0 A_JumpIfInventory("FusionChargeLevel",34,"WhoopsieDaisy")
		TNT1 A 0 A_PlayWeaponSound("marathon/fusion/beep")
		FUSN E 2 A_TakeInventory("FusionChargan",7)
		TNT1 A 0 A_GiveInventory("FusionChargeLevel",1)
		goto AltHold
	WhoopsieDaisy:
		TNT1 A 0 A_TakeInventory("FusionChargan",7)
		TNT1 A 0 A_TakeInventory("FusionChargeLevel",35)
		TNT1 A 0 A_TakeInventory("FusionBullet",20)
		TNT1 A 0 A_SetBlend("Blue",0.8,35)
		TNT1 A 0 A_PlayWeaponSound("hunter/explode")
		TNT1 A 0 DamageThing(999)//A_Explode(500,256) - Turns out people can grief and kill each other.
		Goto Ready
	WaterFire1:
		FUSN A 1
		TNT1 A 0 A_JumpIfNoAmmo("Ready")
		TNT1 A 0 A_AlertMonsters//,0,0,0,0)
		TNT1 A 0 A_FireCustomMissile("FusionShotWater",random(-1,1),1,0,6,0,random(-1,1))
		TNT1 A 0 A_PlaySound("marathon/fusion/fire")
		FUSN A 2 A_Light2
		FUSN B 2 Bright A_Light1 
		FUSN C 2 A_Light0
		FUSN D 3
		TNT1 A 0 A_Refire
		goto Ready
	WaterFire2:
		FUSN A 1
		TNT1 A 0 A_AlertMonsters//,0,0,0,0)
		TNT1 A 0 A_TakeInventory("FusionBullet",4)
		TNT1 A 0 A_TakeInventory("FusionChargan",7)
		TNT1 A 0 A_TakeInventory("FusionChargeLevel",35)
		TNT1 A 0 A_FireCustomMissile("FusionShotWater2",random(-1,1),0,0,6,0,random(-1,1))
		TNT1 A 0 A_PlayWeaponSound("marathon/fusion/super")
		FUSN A 2 A_Light2
		FUSN B 2 Bright A_Light1 
		FUSN C 2 A_Light0
		FUSN D 3
		TNT1 A 0 A_Refire
		goto Ready
	}
}

//*****Assault Rifle*****

ACTOR 32mmCasingSpawner
{
    Radius 1
    Height 1
    Speed 25
    PROJECTILE
	+CLIENTSIDEONLY
    States
    {
    Spawn:
        TNT1 A 1
        TNT1 A 0 A_Die
        Goto Death
    Death:
        TNT1 A 0 A_CustomMissile("32mmCasing",1,5,random(-80,-110),2,random(30,40))
        Stop
    }
}

ACTOR 32mmCasing
{ 
    Scale 0.25
    Radius 3
    Height 3
    Speed 7
    Mass 5
	BounceCount 1
	+CLIENTSIDEONLY
    +THRUACTORS +DROPOFF +MISSILE +NOTELEPORT +FLOORCLIP
    +FORCEXYBILLBOARD +DOOMBOUNCE
    States
    {
    Spawn:
      RBLT ABCDEF 1
      Loop
    Death:
      TNT1 A 1
      //RBLT EEEEEEEEEEEEEEEEEEEE 1 A_FadeOut(0.05)
      Stop
    }
}

ACTOR RifleBullet : Ammo
{
	+IGNORESKILL
    Inventory.MaxAmount 52
}

ACTOR GrenadeInClip : Ammo // In this case it actually IS a clip!
{
	+IGNORESKILL
	Inventory.MaxAmount 7
}

ACTOR MarathonGrenade
{
  Decal Scorch
  Radius 6
  Height 8
  Mass 1
  Speed 17
  Damage 4
  DamageType "Explosive"
  Scale 0.55
  //Gravity 0.11
  DeathSound "marathon/rifle/nadexpl"
  Projectile
  Obituary "%k went with %o in a game of catch-the-grenade."
  -NOGRAVITY
  +LOWGRAVITY
  +FORCERADIUSDMG
  //+GRENADETRAIL
  States
  {
  Spawn:
	NADE AAAAAAAAAAAAAAA 1 Bright A_SpawnItem("MarathonGrenadeSmoke")
  Spawn2:
    NADE A 1 Bright
	LOOP
  Death:
  	TNT1 A 0 A_NoGravity
    XPLD A 4 Bright A_Explode(70+random(0,20),128)
    XPLD B 4 Bright 
    XPLD C 4 Bright
    XPLD D 4 Bright
	XPLD E 4 Bright
	XPLD F 4 Bright
    Stop
  }
}

ACTOR MarathonGrenadeCoop : MarathonGrenade
{
Speed 15
+THRUSPECIES
Species "Player"
States
{
  Death:
  	TNT1 A 0 A_NoGravity
    XPLD A 4 Bright A_Explode(80+random(0,20),128)
    XPLD B 4 Bright 
    XPLD C 4 Bright
    XPLD D 4 Bright
	XPLD E 4 Bright
	XPLD F 4 Bright
    Stop
  }
}

ACTOR MarathonGrenadeSmoke
{
  Radius 1
  Height 1
  Speed 0
  +NOGRAVITY
  -SOLID
  +NOCLIP
  +RANDOMIZE
  +CLIENTSIDEONLY
  Scale 0.15
  States
  {
  Spawn:
    TNT1 A 2
	FLME CD 1 BRIGHT
    MSMK ABCD 1
	stop
  }
}

ACTOR "MA-75B Assault Rifle" : Weapon// replaces Chaingun
{
//Weapon.BobRangeX 0
	Weapon.SelectionOrder 100
	Weapon.SlotNumber 4
	Decal BulletChip
	Inventory.PickupMessage "You picked up a MA-75B Assault Rifle!"
	Weapon.AmmoType		"RifleBullet"
	Weapon.AmmoGive		100
	Weapon.AmmoUse		1
	Weapon.AmmoType2	"GrenadeInClip"
	Weapon.AmmoGive2	100
	Weapon.AmmoUse2		1
	Scale 0.35
	+AMMO_OPTIONAL
	+ALT_AMMO_OPTIONAL
	+NOAUTOAIM
	+NOALERT
	+INVENTORY.UNDROPPABLE
	Radius				12
	Height				12
	States
	{
	Spawn:
		RIFL A -1
		STOP
	Deselect:
		TNT1 A 0 A_Lower
		ASLT A 1 A_Lower
		Loop
	Select:
	TNT1 A 0 A_TakeInventory("UsingSMG",1)
	TNT1 A 0 A_TakeInventory("UsingPistols",1)
	TNT1 A 0 A_TakeInventory("UsingFists",1)
	TNT1 A 0 A_TakeInventory("UsingShotguns",1)
	TNT1 A 0 A_TakeInventory("UsingFusionPistol",1)
	//TNT1 A 0 A_TakeInventory("UsingAssaultRifle",1)
	TNT1 A 0 A_TakeInventory("UsingSpanker",1)
	TNT1 A 0 A_TakeInventory("UsingToasty",1)
	TNT1 A 0 A_TakeInventory("UsingAlienWeapon",1)
	TNT1 A 0 A_TakeInventory("UsingAlienWeapon2",1)
	TNT1 A 0 A_TakeInventory("UsingWMC",1)
	TNT1 A 0 A_TakeInventory("UsingDualPistols",1)
	TNT1 A 0 A_TakeInventory("UsingDualShotguns",1)
	
	TNT1 A 0 A_GiveInventory("UsingAssaultRifle",1)
		TNT1 A 0 A_Raise
		ASLT A 1 A_Raise
		Goto Select+1
	Ready:
		ASLT A 1 A_WeaponReady
		loop
	Fire:
		TNT1 A 0 A_JumpIf(waterlevel == 3, "NothingFire")
		TNT1 A 0 A_JumpIfNoAmmo("DryFire")
		ASLT C 1 A_WeaponReady(4)
		TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"CoopFire")
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"CoopFire")
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_FireCustomMissile("MarathonARBullet",random(-5,5),1,0,0,0,random(-5,5))//A_FireBullets(10,10,-1,9+random(0,6),"MarathonPuff")
		TNT1 A 0 A_PlaySound("marathon/rifle/fire")
		TNT1 A 0 A_FireCustomMissile("32mmCasingSpawner",0,0,0,-13)
		TNT1 A 0 A_GunFLash
		ASLT B 1 Bright A_WeaponReady(4)
		ASLT A 1 Bright A_WeaponReady(4)
		Goto Ready
	CoopFire:
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_FireCustomMissile("MarathonARBulletCoop",random(-5,5),1,0,0,0,random(-5,5))//A_FireBullets(10,10,-1,9+random(0,6),"MarathonPuff")
		TNT1 A 0 A_PlaySound("marathon/rifle/fire")
		TNT1 A 0 A_FireCustomMissile("32mmCasingSpawner",0,0,0,-13)
		TNT1 A 0 A_GunFLash
		ASLT B 1 Bright A_WeaponReady(4)
		ASLT A 1 Bright A_WeaponReady(4)
		Goto Ready
	NothingFire:
		TNT1 A 0
		goto Ready
	DryFire:
		TNT1 A 0 A_JumpIfInventory("Clip",1,2)
		ASLT A 3 A_PlaySound("marathon/rifle/dryfire")
		Goto Ready
		TNT1 A 0
		Goto LReload
	LReload:
		TNT1 A 0 A_JumpIfInventory("Clip",1,1)
		Goto Ready
		ASLT D 10 A_PlaySoundEx("marathon/rifle/reload","Auto",0)
		ASLT E 11
		ASLT F 10
	Reload2:
		TNT1 A 0 A_TakeInventory("Clip",1)
        TNT1 A 0 A_GiveInventory("RifleBullet",1)
        TNT1 A 0 A_JumpIfInventory("RifleBullet",0,3)
        TNT1 A 0 A_JumpIfInventory("Clip",1,1)
		Goto Ready
		TNT1 A 0
        Goto Reload2
		TNT1 A 0
		ASLT A 1
		Goto Ready
	Flash:
		TNT1 A 1 A_Light2
		TNT1 A 1 A_Light1
		TNT1 A 1 A_Light0
		stop
	AltFire:
		TNT1 A 0 A_JumpIf(waterlevel == 3, "NothingFire")
		TNT1 A 0 A_JumpIfInventory("GrenadeInClip",1,3) // Hack, hack, hack.
		TNT1 A 0 A_JumpIfInventory("RocketAmmo",1,"RReload")
		ASLT A 35 A_PlaySoundEx("marathon/rifle/dryfire","Auto",0)
		Goto Ready//RIdle
	AltFire2:
		TNT1 A 0 A_JumpIfInventory("DiscOfRepulsionCooldown",1,"NothingFire2")
		TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"CoopAltFire")
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"CoopAltFire")
		TNT1 A 0 A_Recoil(3)
		TNT1 A 0 A_AlertMonsters//,0,0,0,0)
		TNT1 A 0 A_FireCustomMissile("MarathonGrenade",0,1,0,6,0,4)
		TNT1 A 0 A_PlaySoundEx("marathon/rifle/grenade","Auto",0)
		TNT1 A 0 A_GiveInventory("DiscOfRepulsionCooldown",1)
		TNT1 A 0 ACS_ExecuteAlways(207)
		//ASLT A 10 A_Light2
		//ASLT A 10 A_Light1
		ASLT A 1 A_Light0
		TNT1 A 0 A_JumpIfInventory("GrenadeInClip",1,"Ready")
		//Goto Ready
	RReload:
		TNT1 A 0 A_JumpIfInventory("RocketAmmo",1,1)
		Goto Ready//RIdle
		ASLT A 15 A_PlaySoundEx("marathon/rifle/reload","Auto",0)
	Reload3:
		TNT1 A 0 A_TakeInventory("RocketAmmo",1)
        TNT1 A 0 A_GiveInventory("GrenadeInClip",1)
        TNT1 A 0 A_JumpIfInventory("GrenadeInClip",0,3)
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",1,1)
		Goto Ready
		TNT1 A 0
        Goto Reload3
		TNT1 A 0 
		ASLT A 1
		Goto Ready
	CoopAltFire:
		TNT1 A 0 A_Recoil(3)
		TNT1 A 0 A_AlertMonsters//,0,0,0,0)
		TNT1 A 0 A_FireCustomMissile("MarathonGrenadeCoop",0,1,0,6,0,4)
		TNT1 A 0 A_PlaySoundEx("marathon/rifle/grenade","Auto",0)
		TNT1 A 0 A_GiveInventory("DiscOfRepulsionCooldown",1)
		TNT1 A 0 ACS_ExecuteAlways(207)
		//ASLT A 10 A_Light2
		//ASLT A 10 A_Light1
		ASLT A 1 A_Light0
		TNT1 A 0 A_JumpIfInventory("GrenadeInClip",1,"Ready")
		goto RReload
	NothingFire2:
		ASLT A 6
		goto Ready
	}
}




//*****Rocket Launcher*****

ACTOR SpankerAmmo : Ammo
{
	+IGNORESKILL
    Inventory.MaxAmount 2
}

ACTOR LauncherRocket
{
	Decal Scorch
	Radius 6
	Height 8
	Speed 16
	Damage 7 // Previously 0
	DamageType "Explosive"
	Scale 0.55
	DeathSound "marathon/rocket/hit"
	Obituary "%k spanked %o."
	Projectile
	+RANDOMIZE
	+FORCERADIUSDMG
	States
	{
	Spawn:
		RKET A 1 Bright A_SpawnItem("MarathonRocketSmoke")
		LOOP
	Death:
		RHIT A 5 Bright A_Explode(200+random(0,50),160)//A_Explode(250+random(0,50),96)
		RHIT BCD 5 Bright
		STOP
	}
}

ACTOR LauncherRocketCoop : LauncherRocket
{
Speed 15
+THRUSPECIES
Species "Player"
States
{
	Death:
		RHIT A 5 Bright A_Explode(300+random(0,50),160)//A_Explode(250+random(0,50),96)
		RHIT BCD 5 Bright
		STOP
	}
}

ACTOR MarathonRocketSmoke
{
  Radius 1
  Height 1
  Speed 0
  +NOGRAVITY
  -SOLID
  +NOCLIP
  +RANDOMIZE
  +CLIENTSIDEONLY
  Scale 0.4
  States
  {
  Spawn:
    TNT1 A 2
	FLSH A 1 BRIGHT
    MSMK ABECFDG 1
	stop
  }
}

ACTOR "SPNKR-XP SSM Launcher" : Weapon// replaces RocketLauncher
{
//Weapon.BobRangeX 0
	Weapon.SelectionOrder 2500
	Weapon.SlotNumber 5
	Inventory.PickupMessage "You picked up a SPNKR-XP SSM Launcher!"
	Weapon.AmmoType		"SpankerAmmo"
	Weapon.AmmoGive		2
	Weapon.AmmoUse		1
	Scale 0.35
	+AMMO_OPTIONAL
	+NOALERT
	+WEAPON.EXPLOSIVE
	+INVENTORY.UNDROPPABLE
	Radius				12
	Height				12
	States
	{
	Spawn:
		RCKL A -1
		STOP
	Ready:
		RCKT A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfNoAmmo("Reload")
		LOOP
	Deselect:
		RCKT A 0 Offset(0,32)
		RCKT A 1 Offset(0,35)
		RCKT A 1 Offset(0,38)
		RCKT A 1 Offset(0,41)
		RCKT A 1 Offset(0,44)
		RCKT A 1 Offset(0,47)
		RCKT A 1 Offset(0,50)
		RCKT A 1 Offset(0,53)
		RCKT A 1 Offset(0,56)
		RCKT A 1 Offset(0,59)
		RCKT A 1 Offset(0,62) // 10
		RCKT A 1 Offset(0,65)
		RCKT A 1 Offset(0,68)
		RCKT A 1 Offset(0,71)
		RCKT A 1 Offset(0,74)
		RCKT A 1 Offset(0,77)
		RCKT A 1 Offset(0,80)
		RCKT A 1 Offset(0,83)
		RCKT A 1 Offset(0,86)
		RCKT A 1 Offset(0,89)
		RCKT A 1 Offset(0,92) // 20
		RCKT A 1 Offset(0,95)
		RCKT A 1 Offset(0,98)
		RCKT A 1 Offset(0,101)
		RCKT A 1 Offset(0,104)
		RCKT A 1 Offset(0,107)
		RCKT A 1 Offset(0,110)
		RCKT A 1 Offset(0,113)
		RCKT A 1 Offset(0,116)
		RCKT A 1 Offset(0,119)
		RCKT A 1 Offset(0,122) // 30
		RCKT A 1 Offset(0,125)
		RCKT A 1 Offset(0,127)
		RCKT A 1 Offset(0,130)
		RCKT A 1 Offset(0,133)
		RCKT A 1 Offset(0,136) // 35
	Deselect2:
		RCKT A 1 A_Lower
		RCKT A 1 A_Lower
		LOOP
    Select:
	TNT1 A 0 A_TakeInventory("UsingSMG",1)
	TNT1 A 0 A_TakeInventory("UsingPistols",1)
	TNT1 A 0 A_TakeInventory("UsingFists",1)
	TNT1 A 0 A_TakeInventory("UsingShotguns",1)
	TNT1 A 0 A_TakeInventory("UsingFusionPistol",1)
	TNT1 A 0 A_TakeInventory("UsingAssaultRifle",1)
	//TNT1 A 0 A_TakeInventory("UsingSpanker",1)
	TNT1 A 0 A_TakeInventory("UsingToasty",1)
	TNT1 A 0 A_TakeInventory("UsingAlienWeapon",1)
	TNT1 A 0 A_TakeInventory("UsingAlienWeapon2",1)
	TNT1 A 0 A_TakeInventory("UsingWMC",1)
	TNT1 A 0 A_TakeInventory("UsingDualPistols",1)
	TNT1 A 0 A_TakeInventory("UsingDualShotguns",1)
	
	TNT1 A 0 A_GiveInventory("UsingSpanker",1)
		TNT1 A 0 A_JumpIfNoAmmo("ReloadSelect")
        RCKT A 1 Offset(0,136) // 35
        TNT1 A 0 A_WeaponReady(5)
        RCKT A 1 Offset(0,133)
        TNT1 A 0 A_WeaponReady(5)
        RCKT A 1 Offset(0,130)
        TNT1 A 0 A_WeaponReady(5)
        RCKT A 1 Offset(0,127)
        TNT1 A 0 A_WeaponReady(5)
        RCKT A 1 Offset(0,125)
        TNT1 A 0 A_WeaponReady(5)
        RCKT A 1 Offset(0,122) // 30
        TNT1 A 0 A_WeaponReady(5)
        RCKT A 1 Offset(0,119)
        TNT1 A 0 A_WeaponReady(5)
        RCKT A 1 Offset(0,116)
        TNT1 A 0 A_WeaponReady(5)
        RCKT A 1 Offset(0,113)
        TNT1 A 0 A_WeaponReady(5)
        RCKT A 1 Offset(0,110)
        TNT1 A 0 A_WeaponReady(5)
        RCKT A 1 Offset(0,107)
        TNT1 A 0 A_WeaponReady(5)
        RCKT A 1 Offset(0,104)
        TNT1 A 0 A_WeaponReady(5)
        RCKT A 1 Offset(0,101)
        TNT1 A 0 A_WeaponReady(5)
        RCKT A 1 Offset(0,98)
        TNT1 A 0 A_WeaponReady(5)
        RCKT A 1 Offset(0,95)
        TNT1 A 0 A_WeaponReady(5)
        RCKT A 1 Offset(0,92) // 20
        TNT1 A 0 A_WeaponReady(5)
        RCKT A 1 Offset(0,89)
        TNT1 A 0 A_WeaponReady(5)
        RCKT A 1 Offset(0,86)
        TNT1 A 0 A_WeaponReady(5)
        RCKT A 1 Offset(0,83)
        TNT1 A 0 A_WeaponReady(5)
        RCKT A 1 Offset(0,80)
        TNT1 A 0 A_WeaponReady(5)
        RCKT A 1 Offset(0,77)
        TNT1 A 0 A_WeaponReady(5)
        RCKT A 1 Offset(0,74)
        TNT1 A 0 A_WeaponReady(5)
        RCKT A 1 Offset(0,71)
        TNT1 A 0 A_WeaponReady(5)
        RCKT A 1 Offset(0,68)
        TNT1 A 0 A_WeaponReady(5)
        RCKT A 1 Offset(0,65)
        TNT1 A 0 A_WeaponReady(5)
        RCKT A 1 Offset(0,62) // 10
        TNT1 A 0 A_WeaponReady(5)
        RCKT A 1 Offset(0,59)
        TNT1 A 0 A_WeaponReady(5)
        RCKT A 1 Offset(0,56)
        TNT1 A 0 A_WeaponReady(5)
        RCKT A 1 Offset(0,53)
        TNT1 A 0 A_WeaponReady(5)
        RCKT A 1 Offset(0,50)
        TNT1 A 0 A_WeaponReady(5)
        RCKT A 1 Offset(0,47)
        TNT1 A 0 A_WeaponReady(5)
        RCKT A 1 Offset(0,44)
        TNT1 A 0 A_WeaponReady(5)
        RCKT A 1 Offset(0,41)
        TNT1 A 0 A_WeaponReady(5)
        RCKT A 1 Offset(0,38)
        TNT1 A 0 A_WeaponReady(5)
        RCKT A 1 Offset(0,35)
        TNT1 A 0 A_WeaponReady(5)
        RCKT A 0 Offset(0,32)
        TNT1 A 0 A_WeaponReady(5)
        RCKT A 1 A_Raise
        RCKT A 1 A_Raise
        LOOP
	Fire:
        TNT1 A 0 A_JumpIf(waterlevel == 3, "NothingFire")
		RCKT A 1
        TNT1 A 0 A_JumpIfNoAmmo("Reload")
		TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"CoopFire")
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"CoopFire")
        TNT1 A 0 A_AlertMonsters//,0,0,0,0)
        TNT1 A 0 A_Recoil(7)
        TNT1 A 0 A_FireCustomMissile("LauncherRocket",0,1,-1,10)
        TNT1 A 0 A_PlaySound("marathon/rocket/fire")
        RCKT A 3 Offset(-4,29) Bright
        TNT1 A 0 A_Light2
        RCKT A 3 Offset(-4,26) Bright
        TNT1 A 0 A_Light1
        RCKT A 3 Offset(-4,23) Bright
        TNT1 A 0 A_Light0
        RCKT A 4 Offset(-4,21) Bright
        RCKT A 1 Offset(-4,23) Bright
        RCKT A 1 Offset(-4,26) Bright
        RCKT A 1 Offset(-4,29) Bright
        RCKT A 6 Offset(-4,32)
        TNT1 A 0 A_Refire
        Goto Ready
	CoopFire:
        TNT1 A 0 A_AlertMonsters//,0,0,0,0)
        TNT1 A 0 A_Recoil(7)
        TNT1 A 0 A_FireCustomMissile("LauncherRocketCoop",0,1,-1,10)
        TNT1 A 0 A_PlaySound("marathon/rocket/fire")
        RCKT A 3 Offset(-4,29) Bright
        TNT1 A 0 A_Light2
        RCKT A 3 Offset(-4,26) Bright
        TNT1 A 0 A_Light1
        RCKT A 3 Offset(-4,23) Bright
        TNT1 A 0 A_Light0
        RCKT A 4 Offset(-4,21) Bright
        RCKT A 1 Offset(-4,23) Bright
        RCKT A 1 Offset(-4,26) Bright
        RCKT A 1 Offset(-4,29) Bright
        RCKT A 6 Offset(-4,32)
        TNT1 A 0 A_Refire
        Goto Ready
	NothingFire:
		TNT1 A 0
		goto Ready
	Reload:
		TNT1 A 0 A_JumpIfInventory("RocketAmmo",1,1)
		goto Ready
		TNT1 A 0
		RCKT A 0 Offset(0,32)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,35)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,38)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,41)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,44)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,47)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,50)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,53)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,56)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,59)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,62) // 10
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,65)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,68)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,71)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,74)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,77)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,80)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,83)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,86)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,89)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,92) // 20
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,95)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,98)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,101)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,104)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,107)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,110)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,113)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,116)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,119)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,122) // 30
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,125)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,127)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,130)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,133)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,136) // 35
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,139)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,142)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,145)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,148)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,151) // 40
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,154)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,157)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,160)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 20 Offset(0,163)
	Reload2:
		TNT1 A 0 A_TakeInventory("RocketAmmo",1)
        TNT1 A 0 A_GiveInventory("SpankerAmmo",1)
        TNT1 A 0 A_JumpIfInventory("SpankerAmmo",2,"ReloadFinish")
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",1,1)
		Goto ReloadFinish
		TNT1 A 0
		TNT1 A 0
        Goto Reload2
	ReloadFinish:
		RCKT A 1 Offset(0,163)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,160)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,157)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,154)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,151) // 40
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,148)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,145)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,142)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,139)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,136) // 35
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,133)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,130)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,127)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,125)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,122) // 30
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,119)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,116)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,113)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,110)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,107)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,104)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,101)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,98)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,95)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,92) // 20
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,89)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,86)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,83)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,80)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,77)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,74)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,71)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,68)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,65)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,62) // 10
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,59)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,56)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,53)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,50)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,47)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,44)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,41)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,38)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 1 Offset(0,35)
        TNT1 A 0 A_WeaponReady(5)
		RCKT A 0 Offset(0,32)
		Goto Ready
	ReloadSelect:
		RCKT A 1 Offset(0,136) A_JumpIfInventory("RocketAmmo",1,"Reload2")
		goto ReloadFinish
	}
}



//*****FlameThrower*****

ACTOR NapalmInTank : Ammo
{
	+IGNORESKILL
    Inventory.MaxAmount 210
}

ACTOR FlameShot
{
	Radius 6
	Height 8
	Speed 50
	Damage (random(8,12))
	DamageType Fire
	Scale 0.85
	DeathSound ""
	Projectile
	Obituary "%k made %o all TOZT."
	+RANDOMIZE
	+RIPPER
	+NOBLOOD
	States
	{
	Spawn:
		FLME ABCDEFG 1 Bright
		Stop
	Death:
		FLME FG 1 Bright
		Stop
	}
}

ACTOR "TOZT-7 Napalm Unit" : Weapon// replaces BFG9000
{
//Weapon.BobRangeX 0
	Weapon.SelectionOrder 700
	Weapon.SlotNumber 6
	Inventory.PickupMessage "You picked up a TOZT-7 Backpack Napalm Unit!"
	Weapon.AmmoType		"NapalmInTank"
	Weapon.AmmoGive		0
	Weapon.AmmoUse		1
	Scale 0.35
	+AMMO_OPTIONAL
	+NOALERT
	+INVENTORY.UNDROPPABLE
	Radius				12
	Height				12
	States
	{
	Spawn:
		THRW A -1
		STOP
	Ready:
		FLMT A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfNoAmmo("Reload")
		LOOP
	Deselect:
		FLMT A 1 A_Lower
		LOOP
	Select: // 30 tics in Marathon to ready
	TNT1 A 0 A_TakeInventory("UsingSMG",1)
	TNT1 A 0 A_TakeInventory("UsingPistols",1)
	TNT1 A 0 A_TakeInventory("UsingFists",1)
	TNT1 A 0 A_TakeInventory("UsingShotguns",1)
	TNT1 A 0 A_TakeInventory("UsingFusionPistol",1)
	TNT1 A 0 A_TakeInventory("UsingAssaultRifle",1)
	TNT1 A 0 A_TakeInventory("UsingSpanker",1)
	//TNT1 A 0 A_TakeInventory("UsingToasty",1)
	TNT1 A 0 A_TakeInventory("UsingAlienWeapon",1)
	TNT1 A 0 A_TakeInventory("UsingAlienWeapon2",1)
	TNT1 A 0 A_TakeInventory("UsingWMC",1)
	TNT1 A 0 A_TakeInventory("UsingDualPistols",1)
	TNT1 A 0 A_TakeInventory("UsingDualShotguns",1)
	
	TNT1 A 0 A_GiveInventory("UsingToasty",1)
		FLMT A 1 A_Raise
		LOOP
	Fire:
		TNT1 A 0 A_JumpIf(waterlevel == 3, "NothingFire")
		TNT1 A 0 A_JumpIfNoAmmo("Reload")
		TNT1 A 0 A_AlertMonsters//,0,0,0,0)
		TNT1 A 0 A_FireCustomMissile("FlameShot",0,1,0,3)
		TNT1 A 0 A_PlaySound("marathon/flamethrower/fire")
		TNT1 A 0 A_Recoil(0.1)//ThrustThing(angle*256/360+128, 0.5, 0, 0)
		FLMT B 2 Bright
		TNT1 A 0 A_Refire
		Goto Ready
	NothingFire:
		TNT1 A 0
		goto Ready
	Reload:
		TNT1 A 0 A_JumpIfInventory("Cell",1,1)
		Goto Ready//RIdle
		FLMT A 0 Offset(0,32)
		FLMT A 1 Offset(0,35)
		FLMT A 1 Offset(0,40)
		FLMT A 1 Offset(0,45)
		FLMT A 1 Offset(0,50)
		FLMT A 1 Offset(0,55)
		FLMT A 1 Offset(0,60)
		FLMT A 1 Offset(0,65)
		FLMT A 1 Offset(0,70)
		FLMT A 1 Offset(0,75)
		FLMT A 1 Offset(0,80) // 10
		FLMT A 1 Offset(0,85)
		FLMT A 1 Offset(0,90)
		FLMT A 1 Offset(0,95)
		FLMT A 1 Offset(0,100)
		FLMT A 1 Offset(0,105)
		FLMT A 1 Offset(0,110)
		FLMT A 1 Offset(0,115)
		FLMT A 1 Offset(0,120)
		FLMT A 1 Offset(0,125)
		FLMT A 1 Offset(0,130) // 20
		FLMT A 1 Offset(0,135)
		FLMT A 1 Offset(0,140)
		FLMT A 26 //A_PlaySoundEx("marathon/rifle/reload","Auto",0)
		FLMT A 1 Offset(0,140)
		FLMT A 1 Offset(0,135)
		FLMT A 1 Offset(0,130) // 20
		FLMT A 1 Offset(0,125)
		FLMT A 1 Offset(0,120)
		FLMT A 1 Offset(0,115)
		FLMT A 1 Offset(0,110)
		FLMT A 1 Offset(0,105)
		FLMT A 1 Offset(0,100)
		FLMT A 1 Offset(0,95)
		FLMT A 1 Offset(0,90)
		FLMT A 1 Offset(0,85)
		FLMT A 1 Offset(0,80) // 10
		FLMT A 1 Offset(0,75)
		FLMT A 1 Offset(0,70)
		FLMT A 1 Offset(0,65)
		FLMT A 1 Offset(0,60)
		FLMT A 1 Offset(0,55)
		FLMT A 1 Offset(0,50)
		FLMT A 1 Offset(0,45)
		FLMT A 1 Offset(0,40)
		FLMT A 1 Offset(0,35)
		FLMT A 0 Offset(0,32)
	Reload2:
		TNT1 A 0 A_TakeInventory("Cell",1)
        TNT1 A 0 A_GiveInventory("NapalmInTank",1)
        TNT1 A 0 A_JumpIfInventory("NapalmInTank",0,3)
        TNT1 A 0 A_JumpIfInventory("Cell",1,1)
		Goto Ready
		TNT1 A 0
        Goto Reload2
		TNT1 A 0 
		FLMT A 1
		Goto Ready
	}
}




//*****Alien Weapon*****

ACTOR UnknownAmmo : Ammo 
{
	+IGNORESKILL
    Inventory.MaxAmount 50
}

ACTOR UnknownAmmo2 : Ammo 
{
	+IGNORESKILL
    Inventory.MaxAmount 50
}

ACTOR "Alien Weapon" : Weapon
{
//Weapon.BobRangeX 0
	Weapon.SelectionOrder 500
	Weapon.SlotNumber 8
	Inventory.PickupMessage "system error 0xfded"
	Weapon.AmmoType ""
	Weapon.AmmoGive 0
	Weapon.AmmoUse 0
	+INVENTORY.UNDROPPABLE
	Scale 0.35
	Radius				12
	Height				12
	States
	{
	Spawn:
		AWPN A -1
		STOP
	Deselect:
		TNT1 A 0 A_Lower
		AWP1 A 1 A_Lower
		loop
	Select:
	TNT1 A 0 A_TakeInventory("UsingSMG",1)
	TNT1 A 0 A_TakeInventory("UsingPistols",1)
	TNT1 A 0 A_TakeInventory("UsingFists",1)
	TNT1 A 0 A_TakeInventory("UsingShotguns",1)
	TNT1 A 0 A_TakeInventory("UsingFusionPistol",1)
	TNT1 A 0 A_TakeInventory("UsingAssaultRifle",1)
	TNT1 A 0 A_TakeInventory("UsingSpanker",1)
	TNT1 A 0 A_TakeInventory("UsingToasty",1)
	//TNT1 A 0 A_TakeInventory("UsingAlienWeapon",1)
	TNT1 A 0 A_TakeInventory("UsingAlienWeapon2",1)
	TNT1 A 0 A_TakeInventory("UsingWMC",1)
	TNT1 A 0 A_TakeInventory("UsingDualPistols",1)
	TNT1 A 0 A_TakeInventory("UsingDualShotguns",1)
	
	TNT1 A 0 A_GiveInventory("UsingAlienWeapon",1)
		TNT1 A 0 A_Raise
		AWP1 A 1 A_Raise
		Goto Select+1
	GetRidOfThatShit:
		TNT1 A 0 A_TakeInventory("Alien Weapon",1)
		TNT1 A 0 A_Lower
		AWP1 A 1 A_Lower
		loop
	Ready:
		TNT1 A 0 A_JumpIfInventory("UnknownAmmo",1,1)
		goto GetRidOfThatShit
	Ready2:
		AWP1 A 1 A_WeaponReady
		loop
	Fire:
		TNT1 A 0 A_JumpIf(waterlevel == 3, "NothingFire")
		TNT1 A 0 A_JumpIfInventory("UnknownAmmo",1,1)
		Goto Ready//LIdle
		AWP1 A 3 A_PlaySoundEx("enforcer/shoot","Auto",0)
		TNT1 A 0 A_AlertMonsters//,0,0,0,0)
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"CoopFire")
		AWP1 B 4 Bright A_FireCustomMissile("EnforcerShot",random(-1,1),0,0,0,0,random(-1,1))
		TNT1 A 0 A_Jump(64,1)
		goto Ready
		TNT1 A 0
		TNT1 A 0 A_TakeInventory("UnknownAmmo",1)
		Goto Ready
	CoopFire:
		AWP1 B 4 Bright A_FireCustomMissile("EnforcerShotCoop",random(-1,1),0,0,0,0,random(-1,1))
		TNT1 A 0 A_Jump(64,1)
		goto Ready
		TNT1 A 0
		TNT1 A 0 A_TakeInventory("UnknownAmmo",1)
		Goto Ready
	AltFire:
		TNT1 A 0 A_JumpIf(waterlevel == 3, "NothingFire")
		TNT1 A 0 A_JumpIfInventory("UnknownAmmo",1,1)
		Goto Ready
		AWP1 A 3 A_PlaySoundEx("enforcer/shoot","Auto",0)
		TNT1 A 0 A_AlertMonsters//,0,0,0,0)
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"CoopAltFire1")
		AWP1 B 4 Bright A_FireCustomMissile("EnforcerShot",-22,0)
		TNT1 A 0 A_Jump(64,1)
		goto AltFire2
		TNT1 A 0
		TNT1 A 0 A_TakeInventory("UnknownAmmo",1)
	AltFire2:
		AWP1 A 3 A_PlaySoundEx("enforcer/shoot","Auto",0)
		TNT1 A 0 A_AlertMonsters//,0,0,0,0)
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"CoopAltFire2")
		AWP1 B 4 Bright A_FireCustomMissile("EnforcerShot",22,0)
		TNT1 A 0 A_Jump(64,1)
		goto Ready
		TNT1 A 0
		TNT1 A 0 A_TakeInventory("UnknownAmmo",1)
		Goto Ready
	NothingFire:
		TNT1 A 0
		goto Ready
	CoopAltFire1:
		AWP1 B 4 Bright A_FireCustomMissile("EnforcerShotCoop",-22,0)
		TNT1 A 0 A_Jump(64,1)
		goto AltFire2
		TNT1 A 0
		TNT1 A 0 A_TakeInventory("UnknownAmmo",1)
		goto AltFire2
	CoopAltFire2:
		AWP1 B 4 Bright A_FireCustomMissile("EnforcerShotCoop",22,0)
		TNT1 A 0 A_Jump(64,1)
		goto Ready
		TNT1 A 0
		TNT1 A 0 A_TakeInventory("UnknownAmmo",1)
		Goto Ready
	}
}

ACTOR EnforcerShot
{
	Decal Scorch
	Radius 6
	Height 8
	Speed 15
	Damage (random(30,38)) // Formerly 20,28
	DamageType Fire
    -BLOODSPLATTER
    +NOBLOOD
	Scale 0.35
	DeathSound "enforcer/hit"
	Obituary "%k kildldedd %o witfji09 tth e   44 SYSTEM ERROR"
	Projectile
	States
	{
	Spawn:
		PLAS ABCDEF 2 Bright
		LOOP
	Death:
		PHIT ABCD 2 Bright
		STOP
	}
}

ACTOR AlienWeaponBullet : FastProjectile
{
   Damage (random(9,15)) //Unknown what the damage values were before
   Radius 1
   Height 1
   Speed 80
   Projectile
   DamageType MarathonPlasma
   Obituary "%k kildldedd %o witfji09 tth e   44 SYSTEM ERROR"
   -BLOODSPLATTER
   +NOBLOOD
   +NOTIMEFREEZE
   +NOEXTREMEDEATH
   Decal RailScorchLower
   States
   {
   Spawn:
     TNT1 A 1
     loop
   Death:
     TNT1 A 1 A_SpawnItem("MarathonAlienPuff")
     stop
   }
}

Actor MarathonAlienPuff
{
  scale .375
  +PUFFONACTORS
  +FORCEXYBILLBOARD
  +NOBLOCKMAP
  +NOGRAVITY
  +NOEXTREMEDEATH
  +FORCEXYBILLBOARD
  +CLIENTSIDEONLY
  VSpeed .01
  Mass 5
  States
  {
  Spawn:
	TNT1 A 0 A_PlaySound("alienweapon/hit")
    APUF ABCDE 2 bright
    stop
  Crash:
	TNT1 A 0 A_PlaySound("alienweapon/hit")
    APUF ABCDE 2 bright
    stop
  Death:
	TNT1 A 0 A_PlaySound("alienweapon/hit")
    APUF ABCDE 2 bright
    stop
  }
}

ACTOR AlienWeaponBulletCoop : AlienWeaponBullet
{
+THRUSPECIES
Species "Player"
}

ACTOR EnforcerShotCoop : EnforcerShot
{
+THRUSPECIES
Species "Player"
}


actor " Alien Weapon " : Weapon
{
//Weapon.BobRangeX 0
	Weapon.SelectionOrder 500
	Weapon.SlotNumber 8
	Inventory.PickupMessage "system error 0xfded"
	Weapon.AmmoType ""
	Weapon.AmmoGive 0
	Weapon.AmmoUse 0
	+INVENTORY.UNDROPPABLE
	Scale 0.35
	Radius				12
	Height				12
	States
	{
	Spawn:
		AWPN B -1
		STOP
	GetRidOfThatShit:
		TNT1 A 0 A_TakeInventory(" Alien Weapon ",1)
		TNT1 A 0 A_Lower
		AWP1 A 1 A_Lower
		loop
	Ready:
		TNT1 A 0 A_JumpIfInventory("UnknownAmmo2",1,1)
		goto GetRidOfThatShit
	Ready2:
		AWP2 A 1 A_WeaponReady
		Loop
	Select:
	TNT1 A 0 A_TakeInventory("UsingSMG",1)
	TNT1 A 0 A_TakeInventory("UsingPistols",1)
	TNT1 A 0 A_TakeInventory("UsingFists",1)
	TNT1 A 0 A_TakeInventory("UsingShotguns",1)
	TNT1 A 0 A_TakeInventory("UsingFusionPistol",1)
	TNT1 A 0 A_TakeInventory("UsingAssaultRifle",1)
	TNT1 A 0 A_TakeInventory("UsingSpanker",1)
	TNT1 A 0 A_TakeInventory("UsingToasty",1)
	TNT1 A 0 A_TakeInventory("UsingAlienWeapon",1)
	//TNT1 A 0 A_TakeInventory("UsingAlienWeapon2",1)
	TNT1 A 0 A_TakeInventory("UsingWMC",1)
	TNT1 A 0 A_TakeInventory("UsingDualPistols",1)
	TNT1 A 0 A_TakeInventory("UsingDualShotguns",1)
	
	TNT1 A 0 A_GiveInventory("UsingAlienWeapon2",1)
		AWP2 A 0 A_Raise
		AWP2 A 1 A_Raise
		Loop
	DeSelect:
		AWP2 A 0 A_Lower
		AWP2 A 1 A_Lower
		Loop
	Fire:
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"CoopFire")
		AWP2 B 1 A_Recoil(0.1)
		TNT1 A 0 A_Light2
		TNT1 A 0 A_PlayWeaponSound("alienweapon/shoot")
		TNT1 A 0 A_FireCustomMissile("AlienWeaponBullet",random(-3,3),0,0,0)
		AWP2 C 2 bright A_FireCustomMissile("AlienWeaponBullet",random(-2,2),0,0,0)//A_FireBullets(7.5,0,3,5,"alienpuff",1,0)
		TNT1 A 0 A_Light0
		AWP2 B 1
		TNT1 A 0 A_Jump(48,1)
		goto Ready
		TNT1 A 0
		TNT1 A 0 A_TakeInventory("UnknownAmmo2",1)
		Goto Ready
	CoopFire:
		AWP2 B 1 A_Recoil(0.1)
		TNT1 A 0 A_Light2
		TNT1 A 0 A_PlayWeaponSound("alienweapon/shoot")
		TNT1 A 0 A_FireCustomMissile("AlienWeaponBulletCoop",random(-3,3),0,0,0)
		AWP2 C 2 bright A_FireCustomMissile("AlienWeaponBulletCoop",random(-2,2),0,0,0)//A_FireBullets(7.5,0,3,5,"alienpuff",1,0)
		TNT1 A 0 A_Light0
		AWP2 B 1
		TNT1 A 0 A_Jump(48,1)
		goto Ready
		TNT1 A 0
		TNT1 A 0 A_TakeInventory("UnknownAmmo2",1)
		Goto Ready
	}
}


// Wave Motion Cannon
// I'm actually kind of proud of this weapon.
// It sticks very heavily to Marathon, using only edited Marathon sounds and a few stock sounds, and takes from the Marathon-referencing weapons in Oni and Halo with the WMC and Spartan Laser respectively.

ACTOR MortarAmmo : Ammo
{
	+IGNORESKILL
    Inventory.MaxAmount 3
}

ACTOR WMCAmmo : Ammo
{
	+IGNORESKILL
    Inventory.MaxAmount 8
}

ACTOR "ONI-71 Wave Motion Cannon" : Weapon// replaces RocketLauncher
{
//Weapon.BobRangeX 0
	Weapon.SelectionOrder 2800
	Weapon.SlotNumber 7
	Inventory.PickupMessage "You picked up the ONI-71 Wave Motion Cannon!"
	/*Weapon.AmmoType		"Cell"
	Weapon.AmmoGive		40
	Weapon.AmmoUse		10
	Weapon.AmmoType2	"RocketAmmo"
	Weapon.AmmoGive2	10
	Weapon.AmmoUse2		5*/
	Weapon.AmmoType		"WMCAmmo"
	Weapon.AmmoGive		0
	Weapon.AmmoUse		1
	Weapon.AmmoType2	"MortarAmmo"
	Weapon.AmmoGive2	0
	Weapon.AmmoUse2		1
	Scale 0.5
	+INVENTORY.UNDROPPABLE
	+NOALERT
	+WEAPON.EXPLOSIVE
	+WEAPON.NOAUTOFIRE
	+AMMO_OPTIONAL
	+ALT_AMMO_OPTIONAL
	Radius				12
	Height				12
	States
	{
	Spawn:
		WMCP A -1
		STOP
	Ready:
		MWMC A 1 A_WeaponReady
		LOOP
	Deselect:
		MWMC A 0 Offset(0,32)
		MWMC A 1 Offset(0,35)
		MWMC A 1 Offset(0,38)
		MWMC A 1 Offset(0,41)
		MWMC A 1 Offset(0,44)
		MWMC A 1 Offset(0,47)
		MWMC A 1 Offset(0,50)
		MWMC A 1 Offset(0,53)
		MWMC A 1 Offset(0,56)
		MWMC A 1 Offset(0,59)
		MWMC A 1 Offset(0,62) // 10
		MWMC A 1 Offset(0,65)
		MWMC A 1 Offset(0,68)
		MWMC A 1 Offset(0,71)
		MWMC A 1 Offset(0,74)
		MWMC A 1 Offset(0,77)
		MWMC A 1 Offset(0,80)
		MWMC A 1 Offset(0,83)
		MWMC A 1 Offset(0,86)
		MWMC A 1 Offset(0,89)
		MWMC A 1 Offset(0,92) // 20
		MWMC A 1 Offset(0,95)
		MWMC A 1 Offset(0,98)
		MWMC A 1 Offset(0,101)
		MWMC A 1 Offset(0,104)
		MWMC A 1 Offset(0,107)
		MWMC A 1 Offset(0,110)
		MWMC A 1 Offset(0,113)
		MWMC A 1 Offset(0,116)
		MWMC A 1 Offset(0,119)
		MWMC A 1 Offset(0,122) // 30
		MWMC A 1 Offset(0,125)
		MWMC A 1 Offset(0,127)
		MWMC A 1 Offset(0,130)
		MWMC A 1 Offset(0,133)
		MWMC A 1 Offset(0,136) // 35
	Deselect2:
		MWMC A 1 A_Lower
		MWMC A 1 A_Lower
		LOOP
    Select:
	TNT1 A 0 A_TakeInventory("UsingSMG",1)
	TNT1 A 0 A_TakeInventory("UsingPistols",1)
	TNT1 A 0 A_TakeInventory("UsingFists",1)
	TNT1 A 0 A_TakeInventory("UsingShotguns",1)
	TNT1 A 0 A_TakeInventory("UsingFusionPistol",1)
	TNT1 A 0 A_TakeInventory("UsingAssaultRifle",1)
	TNT1 A 0 A_TakeInventory("UsingSpanker",1)
	TNT1 A 0 A_TakeInventory("UsingToasty",1)
	TNT1 A 0 A_TakeInventory("UsingAlienWeapon",1)
	TNT1 A 0 A_TakeInventory("UsingAlienWeapon2",1)
	//TNT1 A 0 A_TakeInventory("UsingWMC",1)
	TNT1 A 0 A_TakeInventory("UsingDualPistols",1)
	TNT1 A 0 A_TakeInventory("UsingDualShotguns",1)
	
	TNT1 A 0 A_GiveInventory("UsingWMC",1)
        MWMC A 1 Offset(0,136) // 35
        TNT1 A 0 A_WeaponReady(13)
        MWMC A 1 Offset(0,133)
        TNT1 A 0 A_WeaponReady(13)
        MWMC A 1 Offset(0,130)
        TNT1 A 0 A_WeaponReady(13)
        MWMC A 1 Offset(0,127)
        TNT1 A 0 A_WeaponReady(13)
        MWMC A 1 Offset(0,125)
        TNT1 A 0 A_WeaponReady(13)
        MWMC A 1 Offset(0,122) // 30
        TNT1 A 0 A_WeaponReady(13)
        MWMC A 1 Offset(0,119)
        TNT1 A 0 A_WeaponReady(13)
        MWMC A 1 Offset(0,116)
        TNT1 A 0 A_WeaponReady(13)
        MWMC A 1 Offset(0,113)
        TNT1 A 0 A_WeaponReady(13)
        MWMC A 1 Offset(0,110)
        TNT1 A 0 A_WeaponReady(13)
        MWMC A 1 Offset(0,107)
        TNT1 A 0 A_WeaponReady(13)
        MWMC A 1 Offset(0,104)
        TNT1 A 0 A_WeaponReady(13)
        MWMC A 1 Offset(0,101)
        TNT1 A 0 A_WeaponReady(13)
        MWMC A 1 Offset(0,98)
        TNT1 A 0 A_WeaponReady(13)
        MWMC A 1 Offset(0,95)
        TNT1 A 0 A_WeaponReady(13)
        MWMC A 1 Offset(0,92) // 20
        TNT1 A 0 A_WeaponReady(13)
        MWMC A 1 Offset(0,89)
        TNT1 A 0 A_WeaponReady(13)
        MWMC A 1 Offset(0,86)
        TNT1 A 0 A_WeaponReady(13)
        MWMC A 1 Offset(0,83)
        TNT1 A 0 A_WeaponReady(13)
        MWMC A 1 Offset(0,80)
        TNT1 A 0 A_WeaponReady(13)
        MWMC A 1 Offset(0,77)
        TNT1 A 0 A_WeaponReady(13)
        MWMC A 1 Offset(0,74)
        TNT1 A 0 A_WeaponReady(13)
        MWMC A 1 Offset(0,71)
        TNT1 A 0 A_WeaponReady(13)
        MWMC A 1 Offset(0,68)
        TNT1 A 0 A_WeaponReady(13)
        MWMC A 1 Offset(0,65)
        TNT1 A 0 A_WeaponReady(13)
        MWMC A 1 Offset(0,62) // 10
        TNT1 A 0 A_WeaponReady(13)
        MWMC A 1 Offset(0,59)
        TNT1 A 0 A_WeaponReady(13)
        MWMC A 1 Offset(0,56)
        TNT1 A 0 A_WeaponReady(13)
        MWMC A 1 Offset(0,53)
        TNT1 A 0 A_WeaponReady(13)
        MWMC A 1 Offset(0,50)
        TNT1 A 0 A_WeaponReady(13)
        MWMC A 1 Offset(0,47)
        TNT1 A 0 A_WeaponReady(13)
        MWMC A 1 Offset(0,44)
        TNT1 A 0 A_WeaponReady(13)
        MWMC A 1 Offset(0,41)
        TNT1 A 0 A_WeaponReady(13)
        MWMC A 1 Offset(0,38)
        TNT1 A 0 A_WeaponReady(13)
        MWMC A 1 Offset(0,35)
        TNT1 A 0 A_WeaponReady(13)
        MWMC A 0 Offset(0,32)
        TNT1 A 0 A_WeaponReady(13)
        MWMC A 2 A_Raise
        MWMC A 2 A_Raise
        LOOP
	Fire:
		TNT1 A 0 A_JumpIfNoAmmo("Reload")
		MWMC A 5
		TNT1 A 0 A_PlayWeaponSound("wmc/chargeup")
		WMC1 BCDEFGHIJKKLLMM 2
		TNT1 A 0 A_PlayWeaponSound("wmc/beep1")
		TNT1 A 0 A_SetBlend("Red",0.4,8)
		TNT1 A 0 A_Refire
		TNT1 A 0 A_PlayWeaponSound("wmc/chargedown")
		WMC1 MMLLKKJIHGFEDCB 2
		Goto Ready
		
	Hold:
		TNT1 A 0 A_JumpIfInventory("WMCCharge",2,"Hold3")
		TNT1 A 0 A_JumpIfInventory("WMCCharge",1,"Hold2")
		TNT1 A 0 A_JumpIfInventory("ChargeLevel",7,"Charge2")
		WMC2 A 2
		TNT1 A 0 A_GiveInventory("ChargeLevel",1)
		TNT1 A 0 A_Refire
		WMC2 A 1
	RailLevel1:
		TNT1 A 0 A_PlayWeaponSound("wmc/railfire")
		TNT1 A 0 A_Recoil(7)
		TNT1 A 0 A_ZoomFactor(0.99,ZOOM_INSTANT)
		TNT1 A 0 A_FireCustomMissile("WMCRailLevel1",0,1,0,0)
		TNT1 A 0 A_FireCustomMissile("WMCBeamMissile",0,0,0,0)
		MWMC B 2 A_TakeInventory("ChargeLevel",99)
		TNT1 A 0 A_ZoomFactor(1,ZOOM_INSTANT)
		MWMC C 2 A_TakeInventory("ChargeLevel",99)
		MWMC DE 1
		MWMC FGP 5
		TNT1 A 0 A_PlaySound("wmc/reload")
		MWMC HIJ 2
		MWMC A 2
		goto Ready
		
	Charge2:
		TNT1 A 0 A_PlayWeaponSound("wmc/chargeup")
		TNT1 A 0 A_TakeInventory("ChargeLevel",99)
		WMC2 BCDEFGHIJKKLLMM 2
		TNT1 A 0 A_GiveInventory("WMCCharge",1)
		TNT1 A 0 A_PlayWeaponSound("wmc/beep1")
		TNT1 A 0 A_SetBlend("Red",0.4,8)
		TNT1 A 0 A_Refire
	Hold2:
		TNT1 A 0 A_JumpIfInventory("ChargeLevel2",7,"Charge3")
		WMC3 A 2
		TNT1 A 0 A_GiveInventory("ChargeLevel2",1)
		TNT1 A 0 A_Refire
		WMC3 A 1
	RailLevel2:
		TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"CoopRailLevel2")
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"CoopRailLevel2")
		TNT1 A 0 A_PlayWeaponSound("wmc/railfire")
		TNT1 A 0 A_Recoil(7)
		TNT1 A 0 A_ZoomFactor(0.99,ZOOM_INSTANT)
		TNT1 A 0 A_FireCustomMissile("WMCRailLevel2DM",0,1,0,0)
		TNT1 A 0 A_FireCustomMissile("WMCBeamMissile",0,0,0,0)
		TNT1 A 0 A_TakeInventory("WMCAmmo",1)
		MWMC B 2 A_TakeInventory("ChargeLevel2",99)
		TNT1 A 0 A_ZoomFactor(1,ZOOM_INSTANT)
		MWMC C 2 A_TakeInventory("ChargeLevel2",99)
		MWMC DE 1 A_TakeInventory("ChargeLevel",99)
		MWMC FGP 5 A_TakeInventory("WMCCharge",99)
		TNT1 A 0 A_PlaySound("wmc/reload")
		MWMC HIJ 2
		MWMC A 2
		goto Ready
	CoopRailLevel2:
		TNT1 A 0 A_PlayWeaponSound("wmc/railfire")
		TNT1 A 0 A_Recoil(7)
		TNT1 A 0 A_ZoomFactor(0.99,ZOOM_INSTANT)
		TNT1 A 0 A_FireCustomMissile("WMCRailLevel2",0,1,0,0)
		TNT1 A 0 A_FireCustomMissile("WMCBeamMissile",0,0,0,0)
		TNT1 A 0 A_TakeInventory("WMCAmmo",1)
		MWMC B 2 A_TakeInventory("ChargeLevel2",99)
		TNT1 A 0 A_ZoomFactor(1,ZOOM_INSTANT)
		MWMC C 2 A_TakeInventory("ChargeLevel2",99)
		MWMC DE 1 A_TakeInventory("ChargeLevel",99)
		MWMC FGP 5 A_TakeInventory("WMCCharge",99)
		TNT1 A 0 A_PlaySound("wmc/reload")
		MWMC HIJ 2
		MWMC A 2
		goto Ready
		
	Charge3:
		TNT1 A 0 A_PlayWeaponSound("wmc/chargeup")
		TNT1 A 0 A_TakeInventory("ChargeLevel2",99)
		TNT1 A 0 A_TakeInventory("ChargeLevel",99)
		WMC3 BCDEFGHIJKKLLMM 2 A_GiveInventory("WMCCharge",1)
		TNT1 A 0 A_PlayWeaponSound("wmc/beep2")
		TNT1 A 0 A_SetBlend("White",0.8,12)
		TNT1 A 0 A_Refire
	Hold3:
		WMC4 A 2
		TNT1 A 0 A_Refire
		WMC4 A 1
	RailLevel3:
		TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"CoopRailLevel3")
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"CoopRailLevel3")
		TNT1 A 0 A_PlayWeaponSound("wmc/railfire")
		TNT1 A 0 A_Recoil(7)
		TNT1 A 0 A_ZoomFactor(0.99,ZOOM_INSTANT)
		TNT1 A 0 A_FireCustomMissile("WMCRailLevel3DM",0,1,0,0)
		TNT1 A 0 A_FireCustomMissile("WMCBeamMissile",0,0,0,0)
		TNT1 A 0 A_TakeInventory("WMCAmmo",3)
		MWMC B 2 A_TakeInventory("ChargeLevel2",99)
		TNT1 A 0 A_ZoomFactor(1,ZOOM_INSTANT)
		MWMC C 2 A_TakeInventory("ChargeLevel2",99)
		MWMC DE 1 A_TakeInventory("ChargeLevel",99)
		MWMC FGP 5 A_TakeInventory("WMCCharge",99)
		TNT1 A 0 A_PlaySound("wmc/reload")
		MWMC HIJ 2
		MWMC A 2
		goto Ready
	CoopRailLevel3:
		TNT1 A 0 A_PlayWeaponSound("wmc/railfire")
		TNT1 A 0 A_Recoil(7)
		TNT1 A 0 A_ZoomFactor(0.99,ZOOM_INSTANT)
		TNT1 A 0 A_FireCustomMissile("WMCRailLevel3",0,1,0,0)
		TNT1 A 0 A_FireCustomMissile("WMCBeamMissile",0,0,0,0)
		TNT1 A 0 A_TakeInventory("WMCAmmo",3)
		MWMC B 2 A_TakeInventory("ChargeLevel2",99)
		TNT1 A 0 A_ZoomFactor(1,ZOOM_INSTANT)
		MWMC C 2 A_TakeInventory("ChargeLevel2",99)
		MWMC DE 1 A_TakeInventory("ChargeLevel",99)
		MWMC FGP 5 A_TakeInventory("WMCCharge",99)
		TNT1 A 0 A_PlaySound("wmc/reload")
		MWMC HIJ 2
		MWMC A 2
		goto Ready
		
	AltFire:
		TNT1 A 0 A_JumpIfNoAmmo("AltReload")
		TNT1 A 0 A_JumpIf(waterlevel == 3, "NothingFire")
		MWMC A 2
		TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"CoopAltFire")
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"CoopAltFire")
		TNT1 A 0 A_AlertMonsters//,0,0,0,0)
		TNT1 A 0 A_Recoil(6)
		TNT1 A 0 A_FireCustomMissile("WMCGrenade",0,1,-1,3,0,5)
		TNT1 A 0 A_PlayWeaponSound("wmc/grenadefire")
		MWMC K 4 Bright A_Light2
		MWMC L 4 Bright A_Light1 
		MWMC M 4 Bright A_Light0
		MWMC N 4
		MWMC O 5
		MWMC A 3
		Goto Ready
	NothingFire:
		TNT1 A 0
		goto Ready
	CoopAltFire:
		TNT1 A 0 A_AlertMonsters//,0,0,0,0)
		TNT1 A 0 A_Recoil(6)
		TNT1 A 0 A_FireCustomMissile("WMCGrenadeCoop",0,1,-1,3,0,5)
		TNT1 A 0 A_PlayWeaponSound("wmc/grenadefire")
		MWMC K 4 Bright A_Light2
		MWMC L 4 Bright A_Light1 
		MWMC M 4 Bright A_Light0
		MWMC N 4
		MWMC O 5
		MWMC A 3
		Goto Ready
		
	AltReload:
		TNT1 A 0 A_JumpIfInventory("RocketAmmo",1,1)
		goto Ready
		TNT1 A 0
		MWMC A 0 Offset(0,32)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,35)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,38)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,41)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,44)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,47)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,50)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,53)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,56)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,59)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,62) // 10
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,65)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,68)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,71)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,74)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,77)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,80)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,83)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,86)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,89)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,92) // 20
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,95)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,98)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,101)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,104)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,107)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,110)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,113)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,116)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,119)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,122) // 30
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,125)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,127)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,130)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,133)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,136) // 35
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,139)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,142)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,145)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,148)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,151) // 40
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,154)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,157)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,160)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 20 Offset(0,163)
	AltReload2:
		TNT1 A 0 A_TakeInventory("RocketAmmo",5)
        TNT1 A 0 A_GiveInventory("MortarAmmo",1)
        TNT1 A 0 A_JumpIfInventory("MortarAmmo",0,"ReloadFinish")
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",1,1)
		Goto ReloadFinish
		TNT1 A 0
		TNT1 A 0
        Goto AltReload2
	ReloadFinish:
		MWMC A 1 Offset(0,163)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,160)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,157)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,154)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,151) // 40
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,148)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,145)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,142)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,139)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,136) // 35
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,133)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,130)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,127)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,125)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,122) // 30
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,119)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,116)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,113)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,110)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,107)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,104)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,101)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,98)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,95)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,92) // 20
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,89)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,86)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,83)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,80)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,77)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,74)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,71)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,68)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,65)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,62) // 10
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,59)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,56)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,53)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,50)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,47)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,44)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,41)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,38)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,35)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 0 Offset(0,32)
		Goto Ready

	Reload:
		TNT1 A 0 A_JumpIfInventory("Cell",1,1)
		goto Ready
		TNT1 A 0
		MWMC A 0 Offset(0,32)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,35)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,38)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,41)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,44)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,47)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,50)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,53)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,56)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,59)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,62) // 10
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,65)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,68)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,71)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,74)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,77)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,80)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,83)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,86)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,89)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,92) // 20
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,95)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,98)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,101)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,104)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,107)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,110)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,113)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,116)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,119)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,122) // 30
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,125)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,127)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,130)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,133)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,136) // 35
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,139)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,142)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,145)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,148)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,151) // 40
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,154)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,157)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 1 Offset(0,160)
        TNT1 A 0 A_WeaponReady(13)
		MWMC A 20 Offset(0,163)
	Reload2:
		TNT1 A 0 A_TakeInventory("Cell",5)
        TNT1 A 0 A_GiveInventory("WMCAmmo",1)
        TNT1 A 0 A_JumpIfInventory("WMCAmmo",0,"ReloadFinish")
        TNT1 A 0 A_JumpIfInventory("Cell",1,1)
		Goto ReloadFinish
		TNT1 A 0
		TNT1 A 0
        Goto Reload2
	}
}

ACTOR WMCRailLevel1 : FastProjectile
{
   Damage (random(150,200))
   Radius 15
   Height 15
   Speed 400
   Projectile
   Obituary "%k removed %o from existence with the Wave Motion Cannon."
   +RIPPER
   +BLOODSPLATTER
   +NOTIMEFREEZE
   +EXTREMEDEATH
   RenderStyle Add
   Alpha 0.9
   Decal BFGScorch
   DamageType "WMCBeam"
   States
   {
   Spawn:
     TNT1 A 1
     loop
   Death:
     WCHT ABCDEFGHIJKLLMMNNOOPPQQRR 1 BRIGHT
     stop
   }
}

ACTOR WMCRailLevel2 : FastProjectile
{
   Damage (random(150,200))
   Radius 15
   Height 15
   Speed 400
   Projectile
   Obituary "%k removed %o from existence with the Wave Motion Cannon."
   +RIPPER
   +BLOODSPLATTER
   +NOTIMEFREEZE
   +FORCERADIUSDMG
   +EXTREMEDEATH
   RenderStyle Add
   Alpha 0.9
   Decal BFGScorch
   DamageType "WMCBeam"
   States
   {
   Spawn:
     TNT1 A 1
     loop
   Death:
     TNT1 A 0 A_Explode(200+random(0,50),128,1)
     TNT1 A 0 A_Explode(250+random(0,100),128,0)
	 TNT1 AAAAAAAA 0 A_SpawnItemEx("WMCGrenadeExplosion",random(5,-5),random(5,-5),random(5,-5),0.4*random(2,5),0.4*random(2,5),0.4*random(2,5),random(0,360),128,0)
     WCHT ABCDEFGHIJKLLMMNNOOPPQQRR 1 BRIGHT
     stop
   }
}

ACTOR WMCRailLevel2DM : WMCRailLevel2
{
   States
   {
   Death:
     TNT1 A 0 A_Explode(100+random(0,50),128,1)
	 TNT1 AAAAAAAA 0 A_SpawnItemEx("WMCGrenadeExplosion",random(5,-5),random(5,-5),random(5,-5),0.4*random(2,5),0.4*random(2,5),0.4*random(2,5),random(0,360),128,0)
     WCHT ABCDEFGHIJKLLMMNNOOPPQQRR 1 BRIGHT
     stop
   }
}

ACTOR WMCRailLevel3 : FastProjectile
{
   Damage (random(150,200))
   Radius 30
   Height 30
   Speed 400
   Projectile
   Obituary "%k removed %o from existence with the Wave Motion Cannon."
   +RIPPER
   +BLOODSPLATTER
   +NOTIMEFREEZE
   +FORCERADIUSDMG
   +EXTREMEDEATH
   RenderStyle Add
   Alpha 0.9
   Decal BFGScorch
   DamageType "WMCBeam"
   States
   {
   Spawn:
     TNT1 A 1
     loop
   Death:
     TNT1 A 0 A_Explode(250+random(0,50),196)
	 TNT1 A 0 A_CustomMissile("WMCRailLevel3Baby",1,0,0,6)
	 TNT1 A 0 A_CustomMissile("WMCRailLevel3Baby",1,0,22,6)
	 TNT1 A 0 A_CustomMissile("WMCRailLevel3Baby",1,0,45,6)
	 TNT1 A 0 A_CustomMissile("WMCRailLevel3Baby",1,0,67,6)
	 TNT1 A 0 A_CustomMissile("WMCRailLevel3Baby",1,0,90,6)
	 TNT1 A 0 A_CustomMissile("WMCRailLevel3Baby",1,0,112,6)
	 TNT1 A 0 A_CustomMissile("WMCRailLevel3Baby",1,0,135,6)
	 TNT1 A 0 A_CustomMissile("WMCRailLevel3Baby",1,0,157,6)
	 TNT1 A 0 A_CustomMissile("WMCRailLevel3Baby",1,0,180,6)
	 TNT1 A 0 A_CustomMissile("WMCRailLevel3Baby",1,0,202,6)
	 TNT1 A 0 A_CustomMissile("WMCRailLevel3Baby",1,0,225,6)
	 TNT1 A 0 A_CustomMissile("WMCRailLevel3Baby",1,0,247,6)
	 TNT1 A 0 A_CustomMissile("WMCRailLevel3Baby",1,0,270,6)
	 TNT1 A 0 A_CustomMissile("WMCRailLevel3Baby",1,0,292,6)
	 TNT1 A 0 A_CustomMissile("WMCRailLevel3Baby",1,0,315,6)
	 TNT1 A 0 A_CustomMissile("WMCRailLevel3Baby",1,0,337,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,0,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,22,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,45,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,67,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,90,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,112,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,135,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,157,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,180,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,202,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,225,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,247,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,270,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,292,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,315,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,337,6)
	 TNT1 A 1
	 TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,0,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,22,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,45,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,67,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,90,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,112,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,135,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,157,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,180,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,202,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,225,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,247,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,270,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,292,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,315,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamExplode",1,0,337,6)
	 TNT1 AAAAAAAA 0 A_SpawnItemEx("WMCGrenadeExplosion", random(5,-5), random(5,-5), random(5,-5), 0.4*random(2,5), 0.4*random(2,5), 0.4*random(2,5), random(0,360), 128, 0)
     WCHT ABCDEFGHIJKLLMMNNOOPPQQRR 1 BRIGHT
     stop
   }
}

ACTOR WMCRailLevel3DM : WMCRailLevel3
{
   States
   {
   Spawn:
     TNT1 A 1
     loop
   Death:
     TNT1 A 0 A_Explode(50,196,0)
     TNT1 A 0 A_Explode(100,128)
	 TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyDM",1,0,0,6)
	 TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyDM",1,0,22,6)
	 TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyDM",1,0,45,6)
	 TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyDM",1,0,67,6)
	 TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyDM",1,0,90,6)
	 TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyDM",1,0,112,6)
	 TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyDM",1,0,135,6)
	 TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyDM",1,0,157,6)
	 TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyDM",1,0,180,6)
	 TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyDM",1,0,202,6)
	 TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyDM",1,0,225,6)
	 TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyDM",1,0,247,6)
	 TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyDM",1,0,270,6)
	 TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyDM",1,0,292,6)
	 TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyDM",1,0,315,6)
	 TNT1 A 0 A_CustomMissile("WMCRailLevel3BabyDM",1,0,337,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,0,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,22,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,45,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,67,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,90,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,112,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,135,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,157,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,180,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,202,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,225,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,247,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,270,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,292,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,315,6)
	 TNT1 A 0 A_CustomMissile("WMCBeamMissileBaby",1,0,337,6)
	 TNT1 A 1
	 TNT1 AAAAAAAA 0 A_SpawnItemEx("WMCGrenadeExplosion", random(5,-5), random(5,-5), random(5,-5), 0.4*random(2,5), 0.4*random(2,5), 0.4*random(2,5), random(0,360), 128, 0)
     WCHT ABCDEFGHIJKLLMMNNOOPPQQRR 1 BRIGHT
     stop
   }
}


ACTOR WMCGrenade
{
  Decal Scorch
  Radius 6
  Height 8
  Mass 1
  Speed 15
  Damage 10
   DamageType "WMCNade"
  //Scale 0.55
  //Gravity 0.11
  DeathSound "wmc/grenadeexplode1"
  Obituary "%k introduced %o to the magic of orbital bombardment."
  Projectile
  -NOGRAVITY
  +LOWGRAVITY
  +FORCERADIUSDMG
  //+GRENADETRAIL
  States
  {
  Spawn:
	WMCN AAAAAAAAAAAAAAA 1 Bright A_SpawnItem("MarathonGrenadeSmoke")
  Spawn2:
    WMCN A 1 Bright
	LOOP
  Death:
  	TNT1 A 0 A_NoGravity
    TNT1 A 0 A_Explode(100+random(0,50),128)
	TNT1 AAAAAAAA 0 A_SpawnItemEx("WMCGrenadeExplosion", random(5,-5), random(5,-5), random(5,-5), 0.4*random(-5,5), 0.4*random(-5,5), 0.4*random(-5,5), random(0,360), 128, 0)
	TNT1 AAAAAAA 0 A_CustomMissile("WMCGrenade2",0,0,random(-180,180),2,random(16,65))
	TNT1 AAAAAAA 0 A_CustomMissile("WMCGrenade2",0,0,random(-180,180),2,random(16,65))
	TNT1 A 1 A_Scream
    Stop
  }
}

ACTOR WMCGrenadeCoop : WMCGrenade
{
+THRUSPECIES
Species "Player"
States
{
  Death:
  	TNT1 A 0 A_NoGravity
    TNT1 A 0 A_Explode(150+random(0,50),128)
	TNT1 AAAAAAAA 0 A_SpawnItemEx("WMCGrenadeExplosion", random(5,-5), random(5,-5), random(5,-5), 0.4*random(-5,5), 0.4*random(-5,5), 0.4*random(-5,5), random(0,360), 128, 0)
	TNT1 AAAAAAA 0 A_CustomMissile("WMCGrenadeCoop2",0,0,random(-180,180),2,random(16,65))
	TNT1 AAAAAAA 0 A_CustomMissile("WMCGrenadeCoop2",0,0,random(-180,180),2,random(16,65))
	TNT1 A 1 A_Scream
    Stop
  }
}

ACTOR WMCGrenade2
{
  Decal Scorch
  Radius 6
  Height 8
  Mass 1
  Speed 5
  Damage 5
   DamageType "WMCNade"
  Scale 0.3
  Gravity 0.35
  DeathSound "wmc/grenadeexplode2"
  Obituary "%k introduced %o to the magic of orbital bombardment."
  Projectile
  -NOGRAVITY
  +LOWGRAVITY
  +FORCERADIUSDMG
  //+GRENADETRAIL
  States
  {
  Spawn:
    WMCN A 1 Bright
	LOOP
  Death:
  	TNT1 A 0 A_NoGravity
    TNT1 A 0 A_Explode(50+random(0,20),96)
	TNT1 A 0 A_SpawnItem("WMCGrenadeExplosion2")
	TNT1 A 1 A_Scream
    Stop
  }
}

ACTOR WMCGrenadeCoop2 : WMCGrenade2
{
+THRUSPECIES
Species "Player"
States
{
  Death:
  	TNT1 A 0 A_NoGravity
    TNT1 A 0 A_Explode(100+random(0,20),96)
	TNT1 A 0 A_SpawnItem("WMCGrenadeExplosion2")
	TNT1 A 1 A_Scream
    Stop
  }
}

ACTOR WMCGrenadeExplosion
{
  Radius 1
  Height 1
  Speed 0
  +NOGRAVITY
  -SOLID
  +NOCLIP
  +RANDOMIZE
  +CLIENTSIDEONLY
  RenderStyle Add
  Alpha 0.75
  Scale 0.75
  States
  {
  Spawn:
    TNT1 A 0 A_Jump(256,"Spawn1","Spawn2","Spawn3","Spawn4")
  Spawn1:
	WMCN BCDEF 3 BRIGHT
	stop
  Spawn2:
	WMCN GHIJK 3 BRIGHT
	stop
  Spawn3:
	WMCN LMNOP 3 BRIGHT
	stop
  Spawn4:
	WMCN QRSTU 3 BRIGHT
	stop
  }
}

ACTOR WMCGrenadeExplosion2
{
  Radius 1
  Height 1
  Speed 0
  +NOGRAVITY
  -SOLID
  +NOCLIP
  +RANDOMIZE
  +CLIENTSIDEONLY
  RenderStyle Add
  Alpha 0.75
  Scale 0.25
  States
  {
  Spawn:
    TNT1 A 0 A_Jump(256,"Spawn1","Spawn2","Spawn3","Spawn4")
  Spawn1:
	WMCN BCDEF 3 BRIGHT
	stop
  Spawn2:
	WMCN GHIJK 3 BRIGHT
	stop
  Spawn3:
	WMCN LMNOP 3 BRIGHT
	stop
  Spawn4:
	WMCN QRSTU 3 BRIGHT
	stop
  }
}

ACTOR WMCRailLevel3Baby : FastProjectile
{
   Damage (random(100,150))
   Radius 10
   Height 10
   Speed 80
   Projectile
   Obituary "%k removed %o from existence with the Wave Motion Cannon."
   +RIPPER
   +BLOODSPLATTER
   +NOTIMEFREEZE
   +EXTREMEDEATH
   +FORCERADIUSDMG
   -SOLID
   DamageType "WMCBeam"
   DONTHURTSHOOTER
   RenderStyle Add
  Alpha 0.75
  Scale 0.25
   Decal Scorch
   States
   {
   Spawn:
     TNT1 A 1 A_SpawnItem("WMCRailLevel3BabyTrail")
     loop
   Death:
	TNT1 A 0 A_Explode(64,96)
    TNT1 A 0 A_Jump(256,"Spawn1","Spawn2","Spawn3","Spawn4")
  Spawn1:
	WMCN BCDEF 3 BRIGHT
	stop
  Spawn2:
	WMCN GHIJK 3 BRIGHT
	stop
  Spawn3:
	WMCN LMNOP 3 BRIGHT
	stop
  Spawn4:
	WMCN QRSTU 3 BRIGHT
	stop
   }
}

ACTOR WMCRailLevel3BabyDM : WMCRailLevel3Baby
{
Damage (random(5,10))
   States
   {
   Death:
    TNT1 A 0 A_Jump(256,"Spawn1","Spawn2","Spawn3","Spawn4")
	goto Spawn1
   }
}


ACTOR WMCBeamExplode : FastProjectile
{
   Damage 0
   Radius 5
   Height 5
   Speed 20
   Projectile
   Obituary "%k removed %o from existence with the Wave Motion Cannon."
   +RIPPER
   -SOLID
   -BLOODSPLATTER
   +NOTIMEFREEZE
   +EXTREMEDEATH
   DamageType "WMCBeam"
   DONTHURTSHOOTER
   Decal Scorch
   States
   {
   Spawn:
     TNT1 AAAAAAAAAAAAAAAAAAAAAAAA 1 A_Explode(48,128,0)
   Death:
	TNT1 A 0 A_Explode(64,128,0)
	stop
	}
}

ACTOR WMCRailLevel3BabyTrail
{
  Radius 10
  Height 10
  Speed 0
  +NOGRAVITY
  -SOLID
  +RANDOMIZE
  +CLIENTSIDEONLY
  RenderStyle Add
  Alpha 0.9
  Scale 0.25
  States
  {
  Spawn:
     WCHT ACEGIKLMNOPQR 1 BRIGHT
	 stop
  }
}

actor WMCBeamMissile
{
  radius 10
  height 10
  speed 100
  damage 0
  PROJECTILE
  +RIPPER
  -SOLID
  +NOBLOOD
  +CLIENTSIDEONLY
  states
  {
  Spawn:
    TNT1 A 0
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -100, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -98, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -96, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -94, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -92, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -90, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -88, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -86, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -84, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -82, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -80, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -78, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -76, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -74, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -72, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -70, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -68, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -66, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -64, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -62, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -60, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -58, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -56, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -54, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -52, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -50, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -48, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -46, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -44, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -42, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -40, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -38, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -36, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -34, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -32, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -30, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -28, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -26, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -24, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -22, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -20, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -18, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -16, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -14, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -12, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -10, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -8, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -6, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -4, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", -2, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeam", 0, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 1
    goto Spawn+1
  Death:
    TNT1 A 1 bright
    stop
  }
}

actor WMCBeamMissileBaby
{
  radius 10
  height 10
  speed 80
  damage 0
  PROJECTILE
  +RIPPER
  -SOLID
  +NOBLOOD
  +CLIENTSIDEONLY
  states
  {
  Spawn:
    TNT1 A 0
    TNT1 A 0 A_SpawnItemEx("WMCBeamBaby", -78, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeamBaby", -72, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeamBaby", -66, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeamBaby", -60, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeamBaby", -54, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeamBaby", -48, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeamBaby", -42, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeamBaby", -36, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeamBaby", -30, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeamBaby", -24, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeamBaby", -18, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeamBaby", -12, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeamBaby", -6, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 0 A_SpawnItemEx("WMCBeamBaby", 0, 0, 0, 0, 0, 0, 0, 128, 0)
    TNT1 A 1
    goto Spawn+1
  Death:
    TNT1 A 1 bright
    stop
  }
}

actor WMCBeam
{
  RenderStyle Add
  alpha 0.9
  +RANDOMIZE
  +NOCLIP
  +NOGRAVITY
  Scale 0.55
  +CLIENTSIDEONLY
  states
  {
  Spawn:
    WMCS A 2
    WMCS A 1 A_FadeOut(0.05)
    goto Spawn+1
  }
}

actor WMCBeamBaby
{
  RenderStyle Add
  alpha 0.9
  +RANDOMIZE
  +NOCLIP
  +NOGRAVITY
  Scale 0.2
  +CLIENTSIDEONLY
  states
  {
  Spawn:
    WMCS A 1 A_FadeOut(0.1)
    loop
  }
}